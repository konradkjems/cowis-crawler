[
  {
    "id": 103000295217,
    "title": "English Heritage MStore and Transaction Sync Overview",
    "text": "Bespoke/different version because of sync with Navision finance system via multiple servers Development have to apply fixes to the EH code branch (which might be already fixed in the core main trunk/version) So they have to pay for all changes etc Karl/Louis do upgrades Our Windows services put data onto a central server, and then another server puts the data onto a Staging server (whilst doing data transformations???) before EH then pull the data onto NAV Our services also take data from Staging (which has been put there by Nav) and put it into Central form where it gets sent to back offices at each site which includes sales pricing changes and promotions Development documentation on English Heritage is in MStore DevelopmentSoftware Management - Documentation Library - All Documents (sharepoint.com) Specific documents are: - EH Hosted Services etc.docx - - English Heritage - CSRP Overview.docx - English Heritage - MStore Member Integration.docx - English Heritage - MStore Membership validation.docx - EH Restore UAT Process.docx - K3 MStore EH CRM Service .docx",
    "category": "INTERNAL Support Articles",
    "folder": "English Heritage",
    "created_at": "2024-06-04T09:34:43+01:00",
    "updated_at": "2024-09-06T17:52:10+01:00",
    "status": 2,
    "tags": [],
    "description": "<ul data-identifyelement=\"524\"><li data-identifyelement=\"525\" dir=\"ltr\">Bespoke/different version because of sync with Navision finance system via multiple servers<ul data-identifyelement=\"526\" style=\"list-style-type: circle;\"><li data-identifyelement=\"527\" dir=\"ltr\">Development have to apply fixes to the EH code branch (which might be already fixed in the core main trunk/version)</li><li data-identifyelement=\"528\" dir=\"ltr\">So they have to pay for all changes etc</li><li data-identifyelement=\"529\" dir=\"ltr\">Karl/Louis do upgrades</li></ul></li><li data-identifyelement=\"530\" dir=\"ltr\">Our Windows services put data onto a central server, and then another server puts the data onto a Staging server (whilst doing data transformations???) before EH then pull the data onto NAV</li><li data-identifyelement=\"531\" dir=\"ltr\">Our services also take data from Staging (which has been put there by Nav) and put it into Central form where it gets sent to back offices at each site which includes sales pricing changes and promotions&nbsp;</li></ul><p data-identifyelement=\"532\"><br data-identifyelement=\"533\"></p><p data-identifyelement=\"534\"><br data-identifyelement=\"535\"></p><p data-identifyelement=\"536\"><br></p><pre class=\"fd-callout fd-callout--note\" data-identifyelement=\"537\" dir=\"ltr\">Development documentation on English Heritage is in <a data-identifyelement=\"538\" href=\"https://axk3btg.sharepoint.com/sites/MStoreDevelopmentSoftwareManagement/Shared%20Documents/Forms/AllItems.aspx?newTargetListUrl=%2Fsites%2FMStoreDevelopmentSoftwareManagement%2FShared%20Documents&amp;viewpath=%2Fsites%2FMStoreDevelopmentSoftwareManagement%2FShared%20Documents%2FForms%2FAllItems%2Easpx&amp;id=%2Fsites%2FMStoreDevelopmentSoftwareManagement%2FShared%20Documents%2FDocumentation%20Library&amp;viewid=b7d46578%2D6fa5%2D4398%2D9da4%2D91c6d4e17d34\">MStore DevelopmentSoftware Management - Documentation Library - All Documents (sharepoint.com)</a><br data-identifyelement=\"539\"><br data-identifyelement=\"540\">Specific documents are:<br data-identifyelement=\"541\">- <a data-identifyelement=\"544\" href=\"https://axk3btg.sharepoint.com/:w:/s/MStoreDevelopmentSoftwareManagement/EUcDlbhu4V9DrECH6hQTWL8BO-of_fFQEWrd9XdnWObC6w?e=IWwePi\" rel=\"noopener noreferrer\" target=\"_blank\">EH Hosted Services etc.docx</a>&nbsp;- <br data-identifyelement=\"545\">- <a data-identifyelement=\"546\" href=\"https://axk3btg.sharepoint.com/:w:/s/MStoreDevelopmentSoftwareManagement/EYmevxMU9ilMrGeoSYPAGX4Ba9Ocebhn0T2LpaI4t97bxg?e=wMeEdy\"><span style=\"background-color: rgb(247, 218, 100);\">English Heritage - CSRP Overview.docx</span></a><br data-identifyelement=\"547\">- <a data-identifyelement=\"548\" href=\"https://axk3btg.sharepoint.com/:w:/s/MStoreDevelopmentSoftwareManagement/EWFLMGXFX_JNnZ3_k7sSj7sB6aAhfVXdHRKqfSGjpb4zAA?e=GLMThp\">English Heritage - MStore Member Integration.docx</a><br data-identifyelement=\"549\">- <a data-identifyelement=\"550\" href=\"https://axk3btg.sharepoint.com/:w:/s/MStoreDevelopmentSoftwareManagement/EQAwXzsQ6dtFvHwLIyz_mG4BKMkhL9UXfg2fOHHmFAfl0g?e=hAqrKc\">English Heritage - MStore Membership validation.docx</a><br data-identifyelement=\"551\">- <a data-identifyelement=\"552\" href=\"https://axk3btg.sharepoint.com/:w:/s/MStoreDevelopmentSoftwareManagement/EY_NKMIGGtBFiXnPsyiA_zMBOmKSujlV3hh5VOewZS768w?e=u8jvtA\">EH Restore UAT Process.docx</a><br data-identifyelement=\"553\">- <a data-identifyelement=\"554\" href=\"https://axk3btg.sharepoint.com/:w:/s/MStoreDevelopmentSoftwareManagement/ESmZuP-UyS9NjTow_UNKyisB-AYhDSr_gqGQnJFvAJm2kA?e=pehnYe\">K3 MStore EH CRM Service .docx</a></pre><p data-identifyelement=\"555\"><br data-identifyelement=\"556\"></p>",
    "user_id": 103023352668,
    "thumbs_up": 0,
    "thumbs_down": 0,
    "hits": 1,
    "seo_data": {},
    "modified_at": "2024-09-06T17:52:09+01:00",
    "modified_by": 103023352668
  },
  {
    "id": 103000257538,
    "title": "Troubleshooting English Heritage Sync Batch Email's",
    "text": "EH Side - SVMMER01 The program that pulls the data from each individual EH site is called PEHCheck.exe located in C:\\Program Files (x86)\\Merac. This can be opened to manually run various sync reporting processes. There is a log file in the same location called PEHLog.txt. The scheduled PEHCheck is in Task Scheduler, is to run PEHCheck.exe with an argument of -s. K3 Side - SERVER2012 To investigate what data has been received, connect onto SERVER2012 (As ). Open SQL and connect to SQL Server instance SERVER2012\\EH. Then query the database ERRORS-EH. The table EmailTemplate is to see the setup of each email template that gets sent out. The Errorlog table is a log for what data has been received. The batch and xml files are located within E:\\Program Files (x86)\\Merac There are scheduled tasks setup to run the batch files to send the email out.",
    "category": "INTERNAL Support Articles",
    "folder": "English Heritage",
    "created_at": "2023-11-22T11:26:57+00:00",
    "updated_at": "2024-09-04T10:16:59+01:00",
    "status": 2,
    "tags": [],
    "description": "<h2 dir=\"ltr\"><strong>EH Side - SVMMER01</strong></h2><p dir=\"ltr\">The program that pulls the data from each individual EH site is called <strong dir=\"ltr\">PEHCheck.exe&nbsp;</strong>located in <strong dir=\"ltr\">C:\\Program Files (x86)\\Merac</strong>. This can be opened to manually run various sync reporting processes.&nbsp;<span style=\"color: rgb(0, 0, 0); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-size: 13px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal;  text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;\">There is a log file in the</span> same location called <strong dir=\"ltr\">PEHLog.txt</strong>.</p><p dir=\"ltr\"><img src=\"https://s3-eu-central-1.amazonaws.com/euc-cdn.freshdesk.com/data/helpdesk/attachments/production/103066587886/original/02QmkYoLhw6UFLFaNBUQyHKnGz5v95Bcfw.png?1700649263\" style=\"width: auto;\" class=\"fr-fic fr-fil fr-dib\" data-attachment=\"[object Object]\" data-id=\"103066587886\"></p><p dir=\"ltr\"><br></p><p dir=\"ltr\">The scheduled <strong dir=\"ltr\">PEHCheck&nbsp;</strong>is in Task Scheduler, is to run <strong>PEHCheck.exe</strong> with an argument of <strong>-s</strong>.&nbsp;</p><p dir=\"ltr\"><img src=\"https://s3-eu-central-1.amazonaws.com/euc-cdn.freshdesk.com/data/helpdesk/attachments/production/103066590434/original/7y7nRxtOqkImksDQHFkeyHnch-3EqALnUQ.png?1700649549\" style=\"width: auto;\" class=\"fr-fic fr-fil fr-dib\" data-attachment=\"[object Object]\" data-id=\"103066590434\"></p><p dir=\"ltr\"><br></p><p dir=\"ltr\"><br></p><h2 dir=\"ltr\"><strong dir=\"ltr\">K3 Side - SERVER2012</strong></h2><p dir=\"ltr\">To investigate what data has been received, connect onto <strong dir=\"ltr\">SERVER2012&nbsp;</strong>(As ). Open SQL and connect to SQL Server instance <strong dir=\"ltr\">SERVER2012\\EH</strong>. Then query the database <strong dir=\"ltr\">ERRORS-EH</strong>. The table <strong dir=\"ltr\">EmailTemplate&nbsp;</strong>is to see the setup of each email template that gets sent out. The <strong dir=\"ltr\">Errorlog&nbsp;</strong>table is a log for what data has been received.</p><p dir=\"ltr\"><br></p><p dir=\"ltr\">The batch and xml files are located within <strong>E:\\Program Files (x86)\\Merac</strong></p><p dir=\"ltr\"><br></p><p dir=\"ltr\">There are scheduled tasks setup to run the batch files to send the email out.</p><p dir=\"ltr\"><img src=\"https://s3-eu-central-1.amazonaws.com/euc-cdn.freshdesk.com/data/helpdesk/attachments/production/103066573838/original/uLcYvS0FaduDWkmT3YOsNRa8_euchMKdeg.png?1700647707\" style=\"width: auto;\" class=\"fr-fic fr-fil fr-dib\" data-attachment=\"[object Object]\" data-id=\"103066573838\"></p><p><br></p><p><br></p>",
    "user_id": 103082581554,
    "thumbs_up": 0,
    "thumbs_down": 0,
    "hits": 0,
    "seo_data": {},
    "modified_at": "2024-09-04T10:16:59+01:00",
    "modified_by": 103023352668
  },
  {
    "id": 103000267615,
    "title": "Booking Resources Duplicating When Saving In English Heritage Education Bookings",
    "text": "If English Heritage report that booking resource line are duplicating up for specific bookings, you will want to remove the duplicate bkdSeq records, where normal behaviour will resume. Example SQL below (specifying the records that you want to keep in the DELETE statement): SELECT * FROM BKHeader WHERE ID=1072878 SELECT * FROM BKDetail WHERE bkdIDBKHeader=1072878 ORDER BY bkdSeq SELECT * INTO BAKBKDetail09Jan2024 FROM BKDetail WHERE bkdIDBKHeader IN (1072878) BEGIN TRANSACTION DELETE FROM BKDetail WHERE bkdIDBKHeader IN (1072878) AND ID NOT IN (420355,420189,420190,420558,420556,420551,420772,420773,422842,422850,422851) --COMMIT",
    "category": "INTERNAL Support Articles",
    "folder": "English Heritage",
    "created_at": "2024-01-09T12:49:09+00:00",
    "updated_at": "2024-01-09T12:49:10+00:00",
    "status": 2,
    "tags": [],
    "description": "<div><p dir=\"ltr\">If English Heritage report that booking resource line are duplicating up for specific bookings, you will want to remove the duplicate <strong dir=\"ltr\">bkdSeq&nbsp;</strong>records, where normal behaviour will resume.</p><p dir=\"ltr\"><br></p><p dir=\"ltr\">Example SQL below (specifying the records that you want to keep in the DELETE statement):</p><pre contenteditable=\"false\" data-code-brush=\"SQL\" dir=\"ltr\" rel=\"highlighter\">SELECT * FROM BKHeader\nWHERE ID=1072878\n\nSELECT * FROM BKDetail\nWHERE bkdIDBKHeader=1072878\nORDER BY bkdSeq\n\n SELECT * INTO BAKBKDetail09Jan2024 FROM BKDetail\n WHERE bkdIDBKHeader IN (1072878)\n\n BEGIN TRANSACTION \n DELETE FROM BKDetail\n WHERE bkdIDBKHeader IN (1072878) AND ID NOT IN (420355,420189,420190,420558,420556,420551,420772,420773,422842,422850,422851)\n --COMMIT </pre><p style=\"margin-left: 0px; text-align: left;\"><br></p></div>",
    "user_id": 103082581554,
    "thumbs_up": 0,
    "thumbs_down": 0,
    "hits": 1,
    "seo_data": {},
    "modified_at": "2024-01-09T12:49:09+00:00",
    "modified_by": 103082581554
  },
  {
    "id": 103000267807,
    "title": "English Heritage - Eform Replacement with CRM - Live on 18th Jan",
    "text": "Eforms are being replaced with a CRM app that has been written and provided by English Heritage Eforms are being turned off on the 9th Jan 24 meaning the current button will cease to function. A new button has been added to the tills as of the 10th Jan: This runs: The POS now launches a PowerApp.exe that sits in the Merac folder Any site updated with this button, it will work but they should NOT be using this until they go live with CRM on the 18th January 2024...until then it should be paper forms only for memberships Sites and tills we have rolled it out on - this will update live as we do it: https://docs.google.com/spreadsheets/d/147WjB3JI5-RAHEhJpMgzz4ODCfhrqJFujPYduRtumww/edit?usp=sharing",
    "category": "INTERNAL Support Articles",
    "folder": "English Heritage",
    "created_at": "2024-01-10T10:01:05+00:00",
    "updated_at": "2024-01-10T12:07:31+00:00",
    "status": 2,
    "tags": [],
    "description": "<p dir=\"ltr\">Eforms are being replaced with a CRM app that has been written and provided by English Heritage&nbsp;</p><p dir=\"ltr\"><br></p><p dir=\"ltr\">Eforms are being turned off on the 9th Jan 24 meaning the current button will cease to function.</p><p dir=\"ltr\"><br></p><p dir=\"ltr\">A new button has been added to the tills as of the 10th Jan:</p><p dir=\"ltr\"><br></p><p dir=\"ltr\"><img src=\"https://s3-eu-central-1.amazonaws.com/euc-cdn.freshdesk.com/data/helpdesk/attachments/production/103078382090/original/JLqXT01EHArhe0BNWqdIwHp2BjCCorzv-A.png?1704880264\" style=\"width: auto;\" class=\"fr-fic fr-fil fr-dib\" data-attachment=\"[object Object]\" data-id=\"103078382090\"></p><p dir=\"ltr\"><br></p><p dir=\"ltr\">This runs:</p><p dir=\"ltr\"><br></p><p dir=\"ltr\"><img src=\"https://s3-eu-central-1.amazonaws.com/euc-cdn.freshdesk.com/data/helpdesk/attachments/production/103078382283/original/habQY61Z7dClhwOai5Uzb88F4FStVbxdVg.png?1704880283\" style=\"width: auto;\" class=\"fr-fic fr-fil fr-dib\" data-attachment=\"[object Object]\" data-id=\"103078382283\"></p><p dir=\"ltr\"><br></p><p dir=\"ltr\"><span class=\"ui-provider a b c d e f g h i j k l m n o p q r s t u v w x y z ab ac ae af ag ah ai aj ak\" dir=\"ltr\">The POS now launches a PowerApp.exe that sits in the Merac folder</span></p><p dir=\"ltr\"><br></p><p dir=\"ltr\"><img src=\"https://s3-eu-central-1.amazonaws.com/euc-cdn.freshdesk.com/data/helpdesk/attachments/production/103078383646/original/bFGJtwlMron_V4k2Y770RZ8Y4u8_u519qg.png?1704880424\" style=\"width: auto;\" class=\"fr-fic fr-fil fr-dib\" data-attachment=\"[object Object]\" data-id=\"103078383646\"></p><p dir=\"ltr\"><br></p><p dir=\"ltr\"><img src=\"https://s3-eu-central-1.amazonaws.com/euc-cdn.freshdesk.com/data/helpdesk/attachments/production/103078383708/original/ikUZxk9sMAeoijZfVmWgvGGHjSJRW54O9Q.png?1704880432\" style=\"width: auto;\" class=\"fr-fic fr-fil fr-dib\" data-attachment=\"[object Object]\" data-id=\"103078383708\"></p><p dir=\"ltr\"><br></p><p dir=\"ltr\">Any site updated with this button, it will work but they should NOT be using this until they go live with CRM on the 18th January 2024...until then it should be paper forms only for memberships</p><p><br></p><p dir=\"ltr\">Sites and tills we have rolled it out on - this will update live as we do it:&nbsp;</p><p><span class=\"ui-provider a b c d e f g h i j k l m n o p q r s t u v w x y z ab ac ae af ag ah ai aj ak\" dir=\"ltr\"><span style=\"font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, system-ui, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Web&quot;, sans-serif; font-size: 14px; white-space: pre-wrap;\"></span></span></p><p><a href=\"https://docs.google.com/spreadsheets/d/147WjB3JI5-RAHEhJpMgzz4ODCfhrqJFujPYduRtumww/edit?usp=sharing\" rel=\"noreferrer noopener\" target=\"_blank\" title=\"https://docs.google.com/spreadsheets/d/147wjb3ji5-rahehjpmgzz4odcfhrqjfujpydurtumww/edit?usp=sharing\">https://docs.google.com/spreadsheets/d/147WjB3JI5-RAHEhJpMgzz4ODCfhrqJFujPYduRtumww/edit?usp=sharing</a></p><p dir=\"ltr\" style=\"margin: 0px;\"><br></p>&nbsp;<p></p>",
    "user_id": 103082581838,
    "thumbs_up": 0,
    "thumbs_down": 0,
    "hits": 0,
    "seo_data": {},
    "modified_at": "2024-01-10T10:05:21+00:00",
    "modified_by": 103082581838
  },
  {
    "id": 103000304771,
    "title": "EH Education Bookings Booking Resources Showing Closed In Bookings Screen",
    "text": "If English Heritage report that they cannot book bookable resources for certain sites on specific days, this could be because there is a calendar entry that spans over other calendar entries, which causes it to not display in the Calendar for the bookable resource in Setup. But does on the calendar section in the Bookings screen. To investigate this, you could run the below SQL, changing the cadFromDate and cadToDate that spans longer than how long a site would be closed for. Or for the specific dates that has mentioned, so that you can find if there are multiple calendar entries for that specific date, to see if English Heritage agree any of these calendar entries are incorrect. SELECT bchName [Site Name], cahDescription [Calendar Name], cadFromDate [From Date], cadToDate [To Date], CALDetail.LastActionDate [Last Action Date], empForenames+' '+empSurname [Last Action By] FROM CALDetail JOIN Branch ON cadIDBranch=Branch.ID JOIN CALHeader ON cadIDCALHeader=CALHeader.ID JOIN Employee ON CALDetail.LastActionBy=Employee.ID WHERE cadFromDate '30 SEP 2025' AND cadIDCALHeader=13 AND CALDetail.LastAction <> 2 ORDER BY bchName, cadFromDate ASC With EH's approval, you can then delete these records using and updating the date in the below SQL statement: BEGIN TRANSACTION DELETE FROM CALDetail WHERE cadFromDate '30 SEP 2025' AND cadIDCALHeader=13 AND CALDetail.LastAction <> 2 To view an example ticket of this issue, please refer to https://k3support.freshdesk.com/a/tickets/56638.",
    "category": "INTERNAL Support Articles",
    "folder": "English Heritage",
    "created_at": "2024-07-23T12:44:28+01:00",
    "updated_at": "2024-07-23T12:44:28+01:00",
    "status": 2,
    "tags": [],
    "description": "<p dir=\"ltr\">If English Heritage report that they cannot book bookable resources for certain sites on specific days, this could be because there is a calendar entry that spans over other calendar entries, which causes it to not display in the Calendar for the bookable resource in Setup. But does on the calendar section in the Bookings screen.</p><p dir=\"ltr\"><br></p><p dir=\"ltr\">To investigate this, you could run the below SQL, changing the cadFromDate and cadToDate that spans longer than how long a site would be closed for. Or for the specific dates that has mentioned, so that you can find if there are multiple calendar entries for that specific date, to see if English Heritage agree any of these calendar entries are incorrect.</p><p dir=\"ltr\"><br></p><div><pre contenteditable=\"false\" data-code-brush=\"SQL\" rel=\"highlighter\">SELECT bchName [Site Name], cahDescription [Calendar Name], cadFromDate [From Date], cadToDate [To Date], CALDetail.LastActionDate [Last Action Date], empForenames+' '+empSurname [Last Action By] FROM CALDetail\nJOIN Branch ON cadIDBranch=Branch.ID\nJOIN CALHeader ON cadIDCALHeader=CALHeader.ID\nJOIN Employee ON CALDetail.LastActionBy=Employee.ID\nWHERE cadFromDate &lt; '1 JAN 2025' AND cadToDate &gt; '30 SEP 2025'\nAND cadIDCALHeader=13 AND CALDetail.LastAction &lt;&gt; 2\nORDER BY bchName, cadFromDate ASC</pre><p style=\"margin-left: 0px; text-align: left;\"><span dir=\"ltr\" style=\"font-size: 13px; background-color: rgba(0, 0, 0, 0); color: rgb(0, 0, 0); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, sans-serif;\">With EH's approval, you can then delete these records using and updating the date in the below SQL statement:</span></p><p style=\"margin-left: 0px; text-align: left;\"><br></p><div><pre contenteditable=\"false\" data-code-brush=\"SQL\" rel=\"highlighter\">BEGIN TRANSACTION \nDELETE FROM CALDetail\nWHERE cadFromDate &lt; '1 JAN 2025' AND cadToDate &gt; '30 SEP 2025'\nAND cadIDCALHeader=13 AND CALDetail.LastAction &lt;&gt; 2</pre><p style=\"margin-left: 0px; text-align: left;\"><br></p><p style=\"margin-left: 0px; text-align: left;\"><span dir=\"ltr\" style=\"font-size: 13px; background-color: rgba(0, 0, 0, 0); color: rgb(0, 0, 0); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, sans-serif;\">To view an example ticket of this issue, please refer to&nbsp;<a href=\"https://k3support.freshdesk.com/a/tickets/56638\">https://k3support.freshdesk.com/a/tickets/56638</a>.</span></p></div></div>",
    "user_id": 103082581554,
    "thumbs_up": 0,
    "thumbs_down": 0,
    "hits": 0,
    "seo_data": {},
    "modified_at": "2024-07-23T12:44:28+01:00",
    "modified_by": 103082581554
  },
  {
    "id": 103000307828,
    "title": "EH Unable to create account or customer",
    "text": "User gets an error when trying to create a new contact, customer or account in BO. Might get an error similar to this; Likely cause is that the recordIDs table entries are out of synch. Check the account and customer entries in the RecordIDs table where branch is 1. Reset the entries to the latest values custome = last CusMembNo and account lastAccRecNo. Back up RecordIDs table Select * into bak_recordids_ddmmyyyy from RecordIDs See current values in RecordIDs table. select * from RecordIDs where ridTableName in ('account','customer') and ridBranch = 1 Check values in Customer andAccount tables. Select * from Customer order by cusMembNo desc select * from Account order by accRecNo desc Begin transaction update RecordIDs set ridRecNum = 10016959 where ridBranch = 1 and ridTableName = 'Customer' Begin transaction update RecordIDs set ridRecNum = 10016958 where ridBranch = 1 and ridTableName = 'Account'",
    "category": "INTERNAL Support Articles",
    "folder": "English Heritage",
    "created_at": "2024-08-12T16:59:54+01:00",
    "updated_at": "2024-08-12T16:59:56+01:00",
    "status": 2,
    "tags": [
      {
        "name": "Account"
      },
      {
        "name": "Customer"
      }
    ],
    "description": "<p data-identifyelement=\"481\" dir=\"ltr\">User gets an error when trying to create a new contact, customer or account in BO.</p><p data-identifyelement=\"481\" dir=\"ltr\"><br></p><p data-identifyelement=\"481\" dir=\"ltr\">Might get an error similar to this;</p><p data-identifyelement=\"481\" dir=\"ltr\"><img src=\"https://s3-eu-central-1.amazonaws.com/euc-cdn.freshdesk.com/data/helpdesk/attachments/production/103137531605/original/DJxlT8pbN--bbM-qFy4UISufxmfShtGL-Q.png?1723477495\" style=\"width: auto; max-width: 100%; display: block; vertical-align: top; margin: 5px auto; text-align: center; float: none;\" class=\"fr-fic fr-dib fr-bordered\" data-attachment=\"[object Object]\" data-id=\"103137531605\"></p><p><br></p><p dir=\"ltr\">Likely cause is that the recordIDs table entries are out of synch.</p><p dir=\"ltr\">Check the account and customer entries in the RecordIDs table where branch is 1.</p><p dir=\"ltr\">Reset the entries to the latest values custome = last CusMembNo and account lastAccRecNo.</p><p dir=\"ltr\"><br></p><p dir=\"ltr\">Back up RecordIDs table</p><p dir=\"ltr\"><br></p><p dir=\"ltr\">Select * into bak_recordids_ddmmyyyy</p><p dir=\"ltr\">from RecordIDs</p><p dir=\"ltr\">&nbsp;</p><p dir=\"ltr\">See current values in RecordIDs table.</p><p dir=\"ltr\"><br></p><p dir=\"ltr\">select * from RecordIDs</p><p dir=\"ltr\">where ridTableName in ('account','customer')</p><p dir=\"ltr\">and ridBranch = 1</p><p><br></p><p dir=\"ltr\">Check values in Customer andAccount tables.</p><p dir=\"ltr\"><br></p><p>Select * from Customer&nbsp;</p><p>order by cusMembNo desc</p><p><br></p><p>select * from Account</p><p>order by accRecNo desc</p><p><br></p><p><img src=\"https://s3-eu-central-1.amazonaws.com/euc-cdn.freshdesk.com/data/helpdesk/attachments/production/103137535491/original/MK1UjU5qy2Cb6LW1Q4INNyCKtUPZFa7siQ.png?1723478256\" style=\"width: auto; max-width: 100%;\" class=\"fr-fic fr-fil fr-dib\" data-attachment=\"[object Object]\" data-id=\"103137535491\"></p><p><br></p><p>Begin transaction</p><p>update RecordIDs</p><p dir=\"ltr\">set ridRecNum = 10016959</p><p>where ridBranch = 1</p><p dir=\"ltr\">and ridTableName = 'Customer'</p><p dir=\"ltr\"><br></p><p>Begin transaction</p><p>update RecordIDs</p><p>set ridRecNum = 10016958</p><p>where ridBranch = 1</p><p dir=\"ltr\">and ridTableName = 'Account'</p><p><br></p>",
    "user_id": 103081816648,
    "thumbs_up": 0,
    "thumbs_down": 0,
    "hits": 0,
    "seo_data": {},
    "modified_at": "2024-08-12T16:59:56+01:00",
    "modified_by": 103081816648
  },
  {
    "id": 103000305113,
    "title": "EH Transaction synch failing due to duplicate key in the cash up table",
    "text": "Transaction synch not working may be due to duplicate key in the cash up table on central database. Check event viewer on till 1 (database). Look for something like; Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (434, 110, 162327, 1, 6). EHDataLocalExchange service is trying to upload a cashup record that already exist (possibly multiple times) on central. --On central database --Backup the CashUp table. select * into bak_cashup_ddmmyy from cashup Select * from cashup Where csuOpenTxnNo = 162327 And csuBranch = BBB --(branch No) Delete the all the cashup records for that csuOpenTxNo and branch. e.g. 2023/10/17 04:14:49 - Error in modMain:ProcessOutstandingTransactions - Desc:Failed transaction so stop processing. Extra info=Failure , , Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 1, 1). Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 1, 2). Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 1, 3). The statement has been terminated. , , SaveTillTransaction:;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode) VALUES ('474','6','1860536','1','1','0.0000','-6.0000','0','0','',NULL ) ;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode) VALUES ('474','6','1860536','1','2','0.0000','0.0000','0','0','',NULL ) ;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode) VALUES ('474','6','1860536','1','3','677.8000','0.0000','15','0','',NULL ) ;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode) VALUES ('474','6','1860536','1','4','0.0000','0.0000','0','0','',NULL ) ;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode) VALUES ('474','6','1860536','1','5','0.0000','0.0000','0','0','',NULL ) ;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode) VALUES ('474','6','1860536','1','6','30.7600','0.0000','1','0','',NULL ) ;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode) VALUES ('474','6','1860536','1','7','0.0000','0.0000','0','0','',NULL ) ;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode) VALUES ('474','6','1860536','1','8','984.0000','0.0000','9','0','',NULL ) ;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode) VALUES ('474','6','1860536','1','9','0.0000','0.0000','0','0','',NULL ) ;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode) VALUES ('474','6','1860536','1','10','0.0000','0.0000','0','0','',NULL ) ;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode) VALUES ('474','6','1860536','1','13','0.0000','0.0000','0','0','',NULL ) ;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode) VALUES ('474','6','1860536','1','14','0.0000','0.0000','0','0','',NULL ) ;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode) VALUES ('474','6','1860536','1','15','0.0000','0.0000','0','0','',NULL ) ;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode) VALUES ('474','6','1860536','1','21','0.0000','0.0000','0','0','',NULL ) ;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode) VALUES ('474','6','1860536','1','89','0.0000','0.0000','0','0','',NULL ) ;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode) VALUES ('474','6','1860536','1','95','0.0000','0.0000','0','0','',NULL ) ;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode) VALUES ('474','6','1860536','1','96','100.0000','0.0000','0','0','',NULL ) ;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode) VALUES ('474','6','1860536','1','97','0.0000','0.0000','0','0','',NULL ) ;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode) VALUES ('474','6','1860536','1','98','0.0000','0.0000','0','0','',NULL ) ;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode) VALUES ('474','6','1860536','1','99','0.0000','0.0000','0','0','',NULL ) ;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode) VALUES ('474','6','1860536','2','1','0.0000','-6.0000','0','0','',NULL ) ;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode) VALUES ('474','6','1860536','2','2','0.0000','0.0000','0','0','',NULL ) ;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode) VALUES ('474','6','1860536','2','3','677.8000','0.0000','15','0','',NULL ) ;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode) VALUES ('474','6','1860536','2','4','0.0000','0.0000','0','0','',NULL ) ;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode) VALUES ('474','6','1860536','2','5','0.0000','0.0000','0','0','',NULL ) ;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode) VALUES ('474','6','1860536','2','6','30.7600','0.0000','1','0','',NULL ) ;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode) VALUES ('474','6','1860536','2','7','0.0000','0.0000','0','0','',NULL ) ;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode) VALUES ('474','6','1860536','2','8','984.0000','0.0000','9','0','',NULL ) ;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode) VALUES ('474','6','1860536','2','9','0.0000','0.0000','0','0','',NULL ) ;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode) VALUES ('474','6','1860536','2','10','0.0000','0.0000','0','0','',NULL ) ;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode) VALUES ('474','6','1860536','2','13','0.0000','0.0000','0','0','',NULL ) ;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode) VALUES ('474','6','1860536','2','14','0.0000','0.0000','0','0','',NULL ) ;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode) VALUES ('474','6','1860536','2','15','0.0000','0.0000','0','0','',NULL ) ;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode) VALUES ('474','6','1860536','2','21','0.0000','0.0000','0','0','',NULL ) ;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode) VALUES ('474','6','1860536','2','89','0.0000','0.0000','0','0','',NULL ) ;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode) VALUES ('474','6','1860536','2','95','0.0000','0.0000','0','0','',NULL ) ;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode) VALUES ('474','6','1860536','2','96','100.0000','0.0000','0','0','',NULL ) ;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode) VALUES ('474','6','1860536','2','97','0.0000','0.0000','0','0','',NULL ) ;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode) VALUES ('474','6','1860536','2','98','0.0000','0.0000','0','0','',NULL ) ;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode) VALUES ('474','6','1860536','2','99','0.0000','0.0000','0','0','',NULL ) , System.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 1, 1). Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 1, 2). Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 1, 3). Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 1, 4). Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 1, 5). Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 1, 6). Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 1, 7). Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 1, 8). Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 1, 9). Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 1, 10). Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 1, 13). Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 1, 14). Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 1, 15). Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 1, 21). Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 1, 89). Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 1, 95). Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 1, 96). Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 1, 97). Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 1, 98). Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 1, 99). Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 2, 1). Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 2, 2). Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 2, 3). Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 2, 4). Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 2, 5). Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 2, 6). Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 2, 7). Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 2, 8). Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 2, 9). Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 2, 10). Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 2, 13). Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 2, 14). Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 2, 15). Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 2, 21). Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 2, 89). Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 2, 95). Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 2, 96). Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 2, 97). Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 2, 98). Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 2, 99). The statement has been terminated. The statement has been terminated. The statement has been terminated. The statement has been terminated. The statement has been terminated. The statement has been terminated. The statement has been terminated. The statement has been terminated. The statement has been terminated. The statement has been terminated. The statement has been terminated. The statement has been terminated. The statement has been terminated. The statement has been terminated. The statement has been terminated. The statement has been terminated. The statement has been terminated. The statement has been terminated. The statement has been terminated. The statement has been terminated. The statement has been terminated. The statement has been terminated. The statement has been terminated. The statement has been terminated. The statement has been terminated. The statement has been terminated. The statement has been terminated. The statement has been terminated. The statement has been terminated. The statement has been terminated. The statement has been terminated. The statement has been terminated. The statement has been terminated. The statement has been terminated. The statement has been terminated. The statement has been terminated. The statement has been terminated. The statement has been terminated. The statement has been terminated. The statement has been terminated. at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction) at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose) at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady) at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite) at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean asyncWrite) at System.Data.SqlClient.SqlCommand.ExecuteNonQuery() at EHDataExchangeWS.EHDataExchangeWS.SaveDataToLocalDB(String branchCode, DataSet& dsResults, Boolean blnUpdate, Exception& pException, String& pAdditionalInfo) in D:\\VB6 Apps\\SERVICES\\EHDateExchangeWS\\EHDataExchangeWS\\EHDataExchangeWS.asmx.vb:line 654 ClientConnectionId:afb0147f-776c-4ead-b6db-1d9a66228b57 Error Number:2627,State:1,Class:14 ,",
    "category": "INTERNAL Support Articles",
    "folder": "English Heritage",
    "created_at": "2024-07-25T10:05:08+01:00",
    "updated_at": "2024-09-05T09:31:08+01:00",
    "status": 2,
    "tags": [
      {
        "name": "EH synch"
      }
    ],
    "description": "<p dir=\"ltr\">Transaction synch not working may be due to duplicate key in the cash up table on central database.</p><p>Check event viewer on till 1 (database).</p><p>Look for &nbsp;something like;</p><p>Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (434, 110, 162327, 1, 6).</p><p>&nbsp;</p><p dir=\"ltr\">EHDataLocalExchange service is trying to upload a cashup record that already exist (possibly multiple times) on central.</p><p>&nbsp;<img src=\"https://s3-eu-central-1.amazonaws.com/euc-cdn.freshdesk.com/data/helpdesk/attachments/production/103132880605/original/UCqboN5LRE4wM-O4o0Ba0pIAd3589GZWIQ.png?1721896126\" class=\"fr-fic fr-dii\" data-attachment=\"[object Object]\" data-id=\"103132880605\"></p><p>&nbsp;</p><p dir=\"ltr\">--On central database</p><p dir=\"ltr\"><strong dir=\"ltr\">--</strong>Backup the CashUp table.</p><p dir=\"ltr\"><strong>select * into bak_cashup_ddmmyy</strong></p><p dir=\"ltr\"><strong>from cashup</strong></p><p><br></p><p dir=\"ltr\"><strong dir=\"ltr\">Select * from cashup</strong></p><p><strong dir=\"ltr\">Where csuOpenTxnNo = &nbsp;162327</strong></p><p><strong dir=\"ltr\">And csuBranch = BBB --(branch No)</strong></p><p><br></p><p dir=\"ltr\">Delete the all the cashup records for that csuOpenTxNo and branch.</p><p>&nbsp;</p><p>e.g.</p><p>2023/10/17 04:14:49 - Error in modMain:ProcessOutstandingTransactions - Desc:Failed transaction so stop processing. Extra info=Failure , &nbsp;, Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 1, 1).<br>Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 1, 2).<br>Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 1, 3).<br>The statement has been terminated. , , SaveTillTransaction:;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode)<br><br>VALUES ('474','6','1860536','1','1','0.0000','-6.0000','0','0','',NULL<br>)<br><br>;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode)<br><br>VALUES ('474','6','1860536','1','2','0.0000','0.0000','0','0','',NULL<br>)<br><br>;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode)<br><br>VALUES ('474','6','1860536','1','3','677.8000','0.0000','15','0','',NULL<br>)<br><br>;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode)<br><br>VALUES ('474','6','1860536','1','4','0.0000','0.0000','0','0','',NULL<br>)<br><br>;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode)<br><br>VALUES ('474','6','1860536','1','5','0.0000','0.0000','0','0','',NULL<br>)<br><br>;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode)<br><br>VALUES ('474','6','1860536','1','6','30.7600','0.0000','1','0','',NULL<br>)<br><br>;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode)<br><br>VALUES ('474','6','1860536','1','7','0.0000','0.0000','0','0','',NULL<br>)<br><br>;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode)<br><br>VALUES ('474','6','1860536','1','8','984.0000','0.0000','9','0','',NULL<br>)<br><br>;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode)<br><br>VALUES ('474','6','1860536','1','9','0.0000','0.0000','0','0','',NULL<br>)<br><br>;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode)<br><br>VALUES ('474','6','1860536','1','10','0.0000','0.0000','0','0','',NULL<br>)<br><br>;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode)<br><br>VALUES ('474','6','1860536','1','13','0.0000','0.0000','0','0','',NULL<br>)<br><br>;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode)<br><br>VALUES ('474','6','1860536','1','14','0.0000','0.0000','0','0','',NULL<br>)<br><br>;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode)<br><br>VALUES ('474','6','1860536','1','15','0.0000','0.0000','0','0','',NULL<br>)<br><br>;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode)<br><br>VALUES ('474','6','1860536','1','21','0.0000','0.0000','0','0','',NULL<br>)<br><br>;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode)<br><br>VALUES ('474','6','1860536','1','89','0.0000','0.0000','0','0','',NULL<br>)<br><br>;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode)<br><br>VALUES ('474','6','1860536','1','95','0.0000','0.0000','0','0','',NULL<br>)<br><br>;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode)<br><br>VALUES ('474','6','1860536','1','96','100.0000','0.0000','0','0','',NULL<br>)<br><br>;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode)<br><br>VALUES ('474','6','1860536','1','97','0.0000','0.0000','0','0','',NULL<br>)<br><br>;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode)<br><br>VALUES ('474','6','1860536','1','98','0.0000','0.0000','0','0','',NULL<br>)<br><br>;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode)<br><br>VALUES ('474','6','1860536','1','99','0.0000','0.0000','0','0','',NULL<br>)<br><br>;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode)<br><br>VALUES ('474','6','1860536','2','1','0.0000','-6.0000','0','0','',NULL<br>)<br><br>;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode)<br><br>VALUES ('474','6','1860536','2','2','0.0000','0.0000','0','0','',NULL<br>)<br><br>;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode)<br><br>VALUES ('474','6','1860536','2','3','677.8000','0.0000','15','0','',NULL<br>)<br><br>;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode)<br><br>VALUES ('474','6','1860536','2','4','0.0000','0.0000','0','0','',NULL<br>)<br><br>;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode)<br><br>VALUES ('474','6','1860536','2','5','0.0000','0.0000','0','0','',NULL<br>)<br><br>;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode)<br><br>VALUES ('474','6','1860536','2','6','30.7600','0.0000','1','0','',NULL<br>)<br><br>;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode)<br><br>VALUES ('474','6','1860536','2','7','0.0000','0.0000','0','0','',NULL<br>)<br><br>;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode)<br><br>VALUES ('474','6','1860536','2','8','984.0000','0.0000','9','0','',NULL<br>)<br><br>;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode)<br><br>VALUES ('474','6','1860536','2','9','0.0000','0.0000','0','0','',NULL<br>)<br><br>;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode)<br><br>VALUES ('474','6','1860536','2','10','0.0000','0.0000','0','0','',NULL<br>)<br><br>;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode)<br><br>VALUES ('474','6','1860536','2','13','0.0000','0.0000','0','0','',NULL<br>)<br><br>;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode)<br><br>VALUES ('474','6','1860536','2','14','0.0000','0.0000','0','0','',NULL<br>)<br><br>;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode)<br><br>VALUES ('474','6','1860536','2','15','0.0000','0.0000','0','0','',NULL<br>)<br><br>;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode)<br><br>VALUES ('474','6','1860536','2','21','0.0000','0.0000','0','0','',NULL<br>)<br><br>;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode)<br><br>VALUES ('474','6','1860536','2','89','0.0000','0.0000','0','0','',NULL<br>)<br><br>;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode)<br><br>VALUES ('474','6','1860536','2','95','0.0000','0.0000','0','0','',NULL<br>)<br><br>;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode)<br><br>VALUES ('474','6','1860536','2','96','100.0000','0.0000','0','0','',NULL<br>)<br><br>;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode)<br><br>VALUES ('474','6','1860536','2','97','0.0000','0.0000','0','0','',NULL<br>)<br><br>;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode)<br><br>VALUES ('474','6','1860536','2','98','0.0000','0.0000','0','0','',NULL<br>)<br><br>;INSERT INTO Cashup(csuBranch,csuDrawNo,csuOpenTXNNo,csuAttempt,csuPayMethod,csuDeclared,csuVariance,csuQtyDeclared,csuQtyVariance,csuCashBreakDown,csuCurCode)<br><br>VALUES ('474','6','1860536','2','99','0.0000','0.0000','0','0','',NULL<br>)<br><br>, System.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 1, 1).<br>Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 1, 2).<br>Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 1, 3).<br>Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 1, 4).<br>Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 1, 5).<br>Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 1, 6).<br>Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 1, 7).<br>Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 1, 8).<br>Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 1, 9).<br>Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 1, 10).<br>Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 1, 13).<br>Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 1, 14).<br>Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 1, 15).<br>Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 1, 21).<br>Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 1, 89).<br>Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 1, 95).<br>Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 1, 96).<br>Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 1, 97).<br>Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 1, 98).<br>Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 1, 99).<br>Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 2, 1).<br>Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 2, 2).<br>Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 2, 3).<br>Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 2, 4).<br>Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 2, 5).<br>Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 2, 6).<br>Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 2, 7).<br>Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 2, 8).<br>Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 2, 9).<br>Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 2, 10).<br>Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 2, 13).<br>Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 2, 14).<br>Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 2, 15).<br>Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 2, 21).<br>Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 2, 89).<br>Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 2, 95).<br>Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 2, 96).<br>Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 2, 97).<br>Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 2, 98).<br>Violation of PRIMARY KEY constraint 'PK_CashUp_1'. Cannot insert duplicate key in object 'dbo.CashUp'. The duplicate key value is (474, 6, 1860536, 2, 99).<br>The statement has been terminated.<br>The statement has been terminated.<br>The statement has been terminated.<br>The statement has been terminated.<br>The statement has been terminated.<br>The statement has been terminated.<br>The statement has been terminated.<br>The statement has been terminated.<br>The statement has been terminated.<br>The statement has been terminated.<br>The statement has been terminated.<br>The statement has been terminated.<br>The statement has been terminated.<br>The statement has been terminated.<br>The statement has been terminated.<br>The statement has been terminated.<br>The statement has been terminated.<br>The statement has been terminated.<br>The statement has been terminated.<br>The statement has been terminated.<br>The statement has been terminated.<br>The statement has been terminated.<br>The statement has been terminated.<br>The statement has been terminated.<br>The statement has been terminated.<br>The statement has been terminated.<br>The statement has been terminated.<br>The statement has been terminated.<br>The statement has been terminated.<br>The statement has been terminated.<br>The statement has been terminated.<br>The statement has been terminated.<br>The statement has been terminated.<br>The statement has been terminated.<br>The statement has been terminated.<br>The statement has been terminated.<br>The statement has been terminated.<br>The statement has been terminated.<br>The statement has been terminated.<br>The statement has been terminated.<br>at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)<br>at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)<br>at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean&amp; dataReady)<br>at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)<br>at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean asyncWrite)<br>at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()<br>at EHDataExchangeWS.EHDataExchangeWS.SaveDataToLocalDB(String branchCode, DataSet&amp; dsResults, Boolean blnUpdate, Exception&amp; pException, String&amp; pAdditionalInfo) in D:\\VB6 Apps\\SERVICES\\EHDateExchangeWS\\EHDataExchangeWS\\EHDataExchangeWS.asmx.vb:line 654<br>ClientConnectionId:afb0147f-776c-4ead-b6db-1d9a66228b57<br>&nbsp;Error Number:2627,State:1,Class:14 ,&nbsp;</p><p>&nbsp;</p>",
    "user_id": 103081816648,
    "thumbs_up": 0,
    "thumbs_down": 0,
    "hits": 0,
    "seo_data": {},
    "modified_at": "2024-07-25T10:05:08+01:00",
    "modified_by": 103081816648
  },
  {
    "id": 103000138246,
    "title": "English Heritage - Loyalty Discount (Affiliates Scheme)",
    "text": "If the loyalty discount stops working, this type of promotion is set up differently to normal: Check under Affiliate Schemes in back office. There should be a Member Promotion set up: As below: Add the correct promotion, re-create till data.",
    "category": "INTERNAL Support Articles",
    "folder": "English Heritage",
    "created_at": "2023-06-27T11:13:51+01:00",
    "updated_at": "2024-09-05T12:30:53+01:00",
    "status": 2,
    "tags": [],
    "description": "<p dir=\"ltr\"></p><p>&nbsp;</p><p>If the loyalty discount stops working, this type of promotion is set up differently to normal:</p><p>&nbsp;</p><p>&nbsp;</p><p><img width=\"870\" src=\"https://s3-eu-central-1.amazonaws.com/euc-cdn.freshdesk.com/data/helpdesk/attachments/production/103032352295/original/rlxfogEGKuztWWq4sI_S6eNgfH6E6z_jqA.jpeg?1687860822\" class=\"fr-fic fr-dii\" data-attachment=\"[object Object]\" data-id=\"103032352295\"></p><p>&nbsp;</p><p>Check under Affiliate Schemes in back office.&nbsp;</p><p>&nbsp;</p><p>There should be a Member Promotion set up:</p><p>&nbsp;</p><p><img width=\"520\" src=\"https://s3-eu-central-1.amazonaws.com/euc-cdn.freshdesk.com/data/helpdesk/attachments/production/103032352289/original/j4ouoCbcWa6wytsarP9A4tdE0nrNTqO7QA.jpeg?1687860822\" class=\"fr-fic fr-dii\" data-attachment=\"[object Object]\" data-id=\"103032352289\"></p><p>&nbsp;</p><p>As below:</p><p>&nbsp;</p><p>&nbsp;</p><p><img width=\"528\" src=\"https://s3-eu-central-1.amazonaws.com/euc-cdn.freshdesk.com/data/helpdesk/attachments/production/103032352291/original/5tg5SZLgZArdi8R_0y6iB6yHnns6H6fYeQ.jpeg?1687860822\" class=\"fr-fic fr-dii\" data-attachment=\"[object Object]\" data-id=\"103032352291\"></p><p>&nbsp;</p><p>Add the correct promotion, re-create till data.&nbsp;</p>",
    "user_id": 103081812271,
    "thumbs_up": 0,
    "thumbs_down": 0,
    "hits": 0,
    "seo_data": {},
    "modified_at": "2023-06-27T11:13:53+01:00",
    "modified_by": 103081812271
  },
  {
    "id": 103000266616,
    "title": "English Heritage - Check NAV sync (From NAV into MStore)",
    "text": "Sometimes the MStore sync between NAV and MStore will stop. This can be for a few reasons, but the most common reason is due to the record number in the MeracSiteDistribution table and SystemSetting (on local DB) table getting out. Easiest way to check, is to run a stored procedure I put together on the CSRP (Central) database. Use [CSRP-CENTRALLIVE] EXEC REP_EHENTRYSYNC2 The latest entry number is always updating so will generally be a little higher than what the sites have updated. If you judge from the list, any sites which don't have the same number as all the sites at the bottom of the list. In this instance I'm aware a lot of the sites at the top (highlighted in red) are closed currently. ------------ To troubleshoot Using 025 - Aldbrough Roman Site as an example (The sync isn't behind but I'm unable to connect to the others) On the Central Database: Select top 1000 * from MeracSiteDistribution Where SiteCode = 025 Order by EntryNo desc Any lines that have NOT processed will show a zero. You need to check the last action id in SystemSetting (On the site database) matches the last processed value. If you are unsure PLEASE ask Rich or Harry, if you put an incorrect value in here it will break the sync and potentially send transactions from the past causing issues in NAV.",
    "category": "INTERNAL Support Articles",
    "folder": "English Heritage",
    "created_at": "2024-01-03T15:56:50+00:00",
    "updated_at": "2024-09-05T12:30:53+01:00",
    "status": 2,
    "tags": [],
    "description": "<p dir=\"ltr\">Sometimes the MStore sync between NAV and MStore will stop.&nbsp;</p><p dir=\"ltr\"><br></p><p dir=\"ltr\">This can be for a few reasons, but the most common reason is due to the record number in the MeracSiteDistribution table and SystemSetting (on local DB) table getting out.&nbsp;</p><p dir=\"ltr\"><br></p><p dir=\"ltr\">Easiest way to check, is to run a stored procedure I put together on the CSRP (Central) database.</p><p dir=\"ltr\"><br></p><p>Use [CSRP-CENTRALLIVE]</p><p dir=\"ltr\">EXEC REP_EHENTRYSYNC2</p><p dir=\"ltr\"><br></p><p dir=\"ltr\"><img src=\"https://s3-eu-central-1.amazonaws.com/euc-cdn.freshdesk.com/data/helpdesk/attachments/production/103076805152/original/6FgQcjd13K_xV7RgLMSTGTTbr35rh7qZNg.png?1704296869\" style=\"width: auto;\" class=\"fr-fic fr-fil fr-dib\" data-attachment=\"[object Object]\" data-id=\"103076805152\"></p><p dir=\"ltr\"><br></p><p dir=\"ltr\">The latest entry number is always updating so will generally be a little higher than what the sites have updated.&nbsp;</p><p dir=\"ltr\"><br></p><p dir=\"ltr\">If you judge from the list, any sites which don't have the same number as all the sites at the bottom of the list.&nbsp;</p><p dir=\"ltr\"><br></p><p dir=\"ltr\"><img src=\"https://s3-eu-central-1.amazonaws.com/euc-cdn.freshdesk.com/data/helpdesk/attachments/production/103076807949/original/8jvekVHoI1ay4Et8LfWUr3wNeODDXPDWKw.png?1704297317\" style=\"width: auto;\" class=\"fr-fic fr-fil fr-dib\" data-attachment=\"[object Object]\" data-id=\"103076807949\"></p><p dir=\"ltr\"><br></p><p dir=\"ltr\">In this instance I'm aware a lot of the sites at the top (highlighted in red) are closed currently.&nbsp;</p><p dir=\"ltr\"><br></p><p dir=\"ltr\">------------</p><p dir=\"ltr\"><br></p><p dir=\"ltr\"><strong>To troubleshoot</strong></p><p dir=\"ltr\"><br></p><p dir=\"ltr\">Using 025 - Aldbrough Roman Site as an example (The sync isn't behind but I'm unable to connect to the others)</p><p dir=\"ltr\"><br></p><p dir=\"ltr\">On the Central Database:</p><p dir=\"ltr\"><br></p><p>Select top 1000 * from MeracSiteDistribution&nbsp;</p><p>Where SiteCode = 025</p><p dir=\"ltr\">Order by EntryNo desc</p><p dir=\"ltr\"><br></p><p dir=\"ltr\"><img src=\"https://s3-eu-central-1.amazonaws.com/euc-cdn.freshdesk.com/data/helpdesk/attachments/production/103076812492/original/CrwmX7uezHzCpDUVX75iALrQIgQf2gAsyQ.png?1704298025\" style=\"width: auto;\" class=\"fr-fic fr-fil fr-dib\" data-attachment=\"[object Object]\" data-id=\"103076812492\"></p><p dir=\"ltr\"><br></p><p dir=\"ltr\">Any lines that have NOT processed will show a zero.&nbsp;</p><p dir=\"ltr\"><br></p><p dir=\"ltr\">You need to check the last action id in SystemSetting (On the site database) matches the last processed value.&nbsp;</p><p dir=\"ltr\"><br></p><p dir=\"ltr\"><img src=\"https://s3-eu-central-1.amazonaws.com/euc-cdn.freshdesk.com/data/helpdesk/attachments/production/103076812717/original/bN6d5qwv52fzcaRvk4HykI83BB-m61ZDcQ.png?1704298063\" style=\"width: auto;\" class=\"fr-fic fr-fil fr-dib\" data-attachment=\"[object Object]\" data-id=\"103076812717\"></p><p dir=\"ltr\"><br></p><p dir=\"ltr\"><strong>If you are unsure PLEASE ask Rich or Harry, if you put an incorrect value in here it will break the sync and potentially send transactions from the past causing issues in NAV. </strong></p><p dir=\"ltr\"><br></p>",
    "user_id": 103082581838,
    "thumbs_up": 0,
    "thumbs_down": 0,
    "hits": 0,
    "seo_data": {},
    "modified_at": "2024-01-03T16:09:00+00:00",
    "modified_by": 103082581838
  },
  {
    "id": 103000266621,
    "title": "English Heritage - Transaction Sync",
    "text": "Coming soon... Will add screenshots and instructions when I have a ticket I can grab screenshots from.",
    "category": "INTERNAL Support Articles",
    "folder": "English Heritage",
    "created_at": "2024-01-03T16:12:04+00:00",
    "updated_at": "2024-09-05T12:30:53+01:00",
    "status": 1,
    "tags": [],
    "description": "<p dir=\"ltr\">Coming soon...&nbsp;</p><p dir=\"ltr\"><br></p><p dir=\"ltr\">Will add screenshots and instructions when I have a ticket I can grab screenshots from.</p>",
    "user_id": 103082581838,
    "thumbs_up": 0,
    "thumbs_down": 0,
    "hits": 0,
    "seo_data": {},
    "modified_at": "2024-01-03T16:12:04+00:00",
    "modified_by": 103082581838
  },
  {
    "id": 103000312786,
    "title": "Blank Box Showing When Using Payment - Direct Debit Command On Timelines View",
    "text": "If the customer reports that they are trying to use the Payment - Direct Debit command at EH, and a blank box appears, this is because this form has not been created for this panel screen (generally for the Timelines panel screen, as it is already setup in the EH Defaults button layout). I used the below SQL to import the form from EH Defaults, into the Timelines screen. Make sure you replace the text Tintagel-Timelines in the below code with the panel screen that has this issue. Ticket to reference this: https://k3support.freshdesk.com/a/tickets/60947. SELECT * FROM TillControls WHERE tclForm = 'FPAYDIRDEB' AND tclFormat = 'STDXVGA' SELECT distinct tclFormat FROM TillControls SELECT * INTO BAKTillControls17SEP24 FROM TillControls BEGIN TRANSACTION INSERT INTO TillControls (tclFormat, tclForm, tclContainer, tclContainerIdx, tclCtrl, tclIndex, tclProperty, tclSubProperty, tclValue, tclFileDateTime) SELECT 'Tintagel-Timelines', tclForm, tclContainer, tclContainerIdx, tclCtrl, tclIndex, tclProperty, tclSubProperty, tclValue, tclFileDateTime FROM TillControls WHERE tclForm = 'FPAYDIRDEB' AND tclFormat = 'STDXVGA' --COMMIT",
    "category": "INTERNAL Support Articles",
    "folder": "English Heritage",
    "created_at": "2024-09-17T13:00:28+01:00",
    "updated_at": "2024-09-17T13:00:28+01:00",
    "status": 2,
    "tags": [],
    "description": "<p dir=\"ltr\">If the customer reports that they are trying to use the <strong>Payment - Direct Debit</strong> command at EH, and a blank box appears, this is because this form has not been created for this panel screen (generally for the Timelines panel screen, as it is already setup in the EH Defaults button layout).</p><p dir=\"ltr\"><br></p><p dir=\"ltr\"><img src=\"https://s3-eu-central-1.amazonaws.com/euc-cdn.freshdesk.com/data/helpdesk/attachments/production/103147371069/original/cQAu705p4oDBNbhjVhVHn75xNXDWFDSEbA.png?1726573890\" style=\"width: auto; max-width: 100%;\" class=\"fr-fic fr-fil fr-dib\" data-attachment=\"[object Object]\" data-id=\"103147371069\"><img src=\"https://s3-eu-central-1.amazonaws.com/euc-cdn.freshdesk.com/data/helpdesk/attachments/production/103147371158/original/Jv0jSp4sskAv5f2v4nlQA2EOhGJpyNRd8w.png?1726573899\" style=\"width: 549px; max-width: 100%;\" class=\"fr-fic fr-fil fr-dib\" data-attachment=\"[object Object]\" data-id=\"103147371158\"></p><p dir=\"ltr\"><br></p><p dir=\"ltr\"><img src=\"https://s3-eu-central-1.amazonaws.com/euc-cdn.freshdesk.com/data/helpdesk/attachments/production/103147372957/original/gakSmIOc-gwygITGdDvJyYNDprQ7JoywWg.png?1726574105\" style=\"width: auto; max-width: 100%;\" class=\"fr-fic fr-fil fr-dib\" data-attachment=\"[object Object]\" data-id=\"103147372957\"></p><p dir=\"ltr\"><br></p><p dir=\"ltr\">I used the below SQL to import the form from EH Defaults, into the Timelines screen. Make sure you replace the text&nbsp;<strong dir=\"ltr\">Tintagel-Timelines&nbsp;</strong>in the below code with the panel screen that has this issue. Ticket to reference this:&nbsp;<a href=\"https://k3support.freshdesk.com/a/tickets/60947\">https://k3support.freshdesk.com/a/tickets/60947</a>.</p><p><br></p><div><pre contenteditable=\"false\" data-code-brush=\"SQL\" rel=\"highlighter\">SELECT * FROM TillControls\nWHERE tclForm = 'FPAYDIRDEB' AND tclFormat = 'STDXVGA'\n\nSELECT distinct tclFormat FROM TillControls\n\nSELECT * INTO BAKTillControls17SEP24 FROM TillControls \n\nBEGIN TRANSACTION \nINSERT INTO TillControls (tclFormat, tclForm, tclContainer, tclContainerIdx, tclCtrl, tclIndex, tclProperty, tclSubProperty, tclValue, tclFileDateTime)\nSELECT 'Tintagel-Timelines', tclForm, tclContainer, tclContainerIdx, tclCtrl, tclIndex, tclProperty, tclSubProperty, tclValue, tclFileDateTime FROM TillControls\nWHERE tclForm = 'FPAYDIRDEB' AND tclFormat = 'STDXVGA'\n--COMMIT </pre></div>",
    "user_id": 103082581554,
    "thumbs_up": 0,
    "thumbs_down": 0,
    "hits": 0,
    "seo_data": {},
    "modified_at": "2024-09-17T13:00:28+01:00",
    "modified_by": 103082581554
  },
  {
    "id": 103000313973,
    "title": "Re-Inserting Closing Records For EH",
    "text": "If EH request to insert a closing record because the original closing record did not make it to NAV, you can use and follow the below SQL Find the opening transaction number for the cash drawer. This can be done in SQL or in the Back Office. Make a copy of the CashDraw table. Update CashDraw record for the cash drawer in question. BEGIN TRANSACTION UPDATE CashDraw SET csdStatus='O',csdClosedAt='', csdClosedBy='', csdFinalTXNNo='' WHERE csdOpenTXNNo IN ([Open Cash Drawer Transaction Number]) --COMMIT Insert Closing record into TillTXNs. BEGIN TRANSACTION INSERT INTO TillTXNs VALUES(,,1,0,'','','','CLO,1,*Till*,*CashDrawer*,1,100,,*Date* 2024 23:59','','TIL') --COMMIT Update TillTxns Set ttnErrorMessage='', ttnStatus='' Cash up and finalise the cash drawer in the Back Office. Check that this closing record and following transactions sync to Central. Use the below SQL in the local site. Select * from SystemSetting SELECT MAX(txhNo) FROM TXNHeader If they do not, then there maybe a duplicate key in the CashUp table in Central, that needs to be removed, so the new records need to be sent to Central. Back up and remove CashUp records in Central ONLY. SELECT * FROM CashUp WHERE csuBranch=[Branch] AND csuOpenTXNNo IN ([Opening Cash Drawer Transaction Number]) SELECT * INTO BAKCashUp[Date] FROM CashUp WHERE csuBranch=[Branch] AND csuOpenTXNNo IN ([Opening Cash Drawer Transaction Number]) BEGIN TRANSACTION DELETE FROM CashUp WHERE csuBranch=[Branch] AND csuOpenTXNNo IN ([Opening Cash Drawer Transaction Number]) --COMMIT",
    "category": "INTERNAL Support Articles",
    "folder": "English Heritage",
    "created_at": "2024-09-24T15:25:26+01:00",
    "updated_at": "2024-09-24T15:35:52+01:00",
    "status": 2,
    "tags": [],
    "description": "<p dir=\"ltr\">If EH request to insert a closing record because the original closing record did not make it to NAV, you can use and follow the below SQL</p><p dir=\"ltr\"><br></p><ol><li dir=\"ltr\">Find the opening transaction number for the cash drawer. This can be done in SQL or in the Back Office.<br><br></li><li dir=\"ltr\">Make a copy of the CashDraw table.<br><br></li><li dir=\"ltr\">Update CashDraw record for the cash drawer in question.<br><pre contenteditable=\"false\" data-code-brush=\"SQL\" rel=\"highlighter\">BEGIN TRANSACTION \nUPDATE CashDraw \nSET csdStatus='O',csdClosedAt='', csdClosedBy='', csdFinalTXNNo=''\nWHERE csdOpenTXNNo IN ([Open Cash Drawer Transaction Number])\n--COMMIT</pre><br></li><li><div><p style=\"margin-left: 0px; text-align: left;\"><span dir=\"ltr\" style=\"font-size: 13px; background-color: rgba(0, 0, 0, 0); color: rgb(0, 0, 0); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, sans-serif;\">Insert Closing record into TillTXNs.</span></p><div><pre contenteditable=\"false\" data-code-brush=\"SQL\" rel=\"highlighter\">BEGIN TRANSACTION \nINSERT INTO TillTXNs \nVALUES(,,1,0,'','','','CLO,1,*Till*,*CashDrawer*,1,100,,*Date* 2024 23:59','','TIL')\n--COMMIT\n\nUpdate TillTxns \nSet ttnErrorMessage='', ttnStatus=''</pre><p style=\"margin-left: 0px; text-align: left;\"><br></p></div></div></li><li><div><p style=\"margin-left: 0px; text-align: left;\"><span dir=\"ltr\" style=\"font-size: 13px; background-color: rgba(0, 0, 0, 0); color: rgb(0, 0, 0); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, sans-serif;\">Cash up and finalise the cash drawer in the Back Office.</span></p><p><br></p></div></li><li><div><p style=\"margin-left: 0px; text-align: left;\"><span dir=\"ltr\" style=\"font-size: 13px; background-color: rgba(0, 0, 0, 0); color: rgb(0, 0, 0); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, sans-serif;\">Check that this closing record and following transactions sync to Central. Use the below SQL in the local site.</span></p><div><pre contenteditable=\"false\" data-code-brush=\"SQL\" rel=\"highlighter\">Select * from SystemSetting \nSELECT MAX(txhNo) FROM TXNHeader </pre><p style=\"margin-left: 0px; text-align: left;\"></p></div><p style=\"margin-left: 0px; text-align: left;\"><br></p></div></li><li><div><p style=\"margin-left: 0px; text-align: left;\"><span dir=\"ltr\" style=\"font-size: 13px; background-color: rgba(0, 0, 0, 0); color: rgb(0, 0, 0); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, sans-serif;\">If they do not, then there maybe a duplicate key in the CashUp table in Central, that needs to be removed, so the new records need to be sent to Central.</span><br><span dir=\"ltr\" style=\"font-size: 13px; background-color: rgba(0, 0, 0, 0); color: rgb(0, 0, 0); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, sans-serif;\"><img src=\"https://s3-eu-central-1.amazonaws.com/euc-cdn.freshdesk.com/data/helpdesk/attachments/production/103149460288/original/EXI7k8hSe0zcjiT7yjH26rtPvL2aUzlYtQ.png?1727188287\" class=\"fr-fic fr-fil fr-dib\" data-id=\"103149460288\" style=\"box-sizing: border-box; border: 0px; vertical-align: top; max-width: 100%; position: relative; cursor: pointer; padding: 0px 1px; margin: 5px auto 5px 0px; display: block; float: none; text-align: left; color: rgb(0, 0, 0); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-size: 13px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal;  text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; width: auto;\" data-attachment=\"[object Object]\">&nbsp;</span></p></div></li><li><div><p dir=\"ltr\" style=\"margin-left: 0px; text-align: left;\">Back up and remove CashUp records in Central ONLY.<br><br></p><div><pre contenteditable=\"false\" data-code-brush=\"SQL\" rel=\"highlighter\">SELECT * FROM CashUp\nWHERE csuBranch=[Branch] AND csuOpenTXNNo IN ([Opening Cash Drawer Transaction Number])\n\nSELECT * INTO BAKCashUp[Date] FROM CashUp\nWHERE csuBranch=[Branch] AND csuOpenTXNNo IN ([Opening Cash Drawer Transaction Number])\n\nBEGIN TRANSACTION \nDELETE FROM CashUp\nWHERE csuBranch=[Branch] AND csuOpenTXNNo IN ([Opening Cash Drawer Transaction Number])\n--COMMIT </pre><p style=\"margin-left: 0px; text-align: left;\"></p></div><br><p></p><br><br><p></p></div></li></ol><p dir=\"ltr\"><br></p><p dir=\"ltr\"><br></p><p dir=\"ltr\"><br></p>",
    "user_id": 103082581554,
    "thumbs_up": 0,
    "thumbs_down": 0,
    "hits": 0,
    "seo_data": {},
    "modified_at": "2024-09-24T15:36:23+01:00",
    "modified_by": 103082581554
  },
  {
    "id": 103000314402,
    "title": "Insert Opening Record Due This Missing From NAV For EH",
    "text": "If EH Application Support report that they have transactions and a tender declaration (closing record) in NAV, but no corresponding opening record, we need to insert another opening record for the same cash drawer. An example of a ticket regarding this is this one: https://support.k3btg.com/a/tickets/61821. You need to: Grab original TXN file corresponding to the transactions EH Application Support send over as reference, if possible. In the local EH database, insert an opening record into TillTXNs, preferably using the original OPN line in the TXN File, but removing the seconds from the date/time fields BEGIN TRANSACTION INSERT INTO TillTXNs VALUES(,,1,0,'','','','OPN,1,*Till*,*CashDrawer*,1,100,,*Date* 2024 10:00:00,0','','TIL') --COMMIT Find the csdOpenTXNNo for the new cash drawer, and then mark this as finalised via SQL. BEGIN TRANSACTION UPDATE CashDraw SET csdStatus='', csdClosedBy=100, csdNotes='Forced-Closed with no Closing record to resolve K3 ticket [Ticket Number]', csdClosedAt = '[Time and date the cash drawer was closed on the original cash drawer]' WHERE csdOpenTXNNo=[New cash drawer csdOpenTXNNo] --COMMIT",
    "category": "INTERNAL Support Articles",
    "folder": "English Heritage",
    "created_at": "2024-09-26T09:57:54+01:00",
    "updated_at": "2024-09-26T09:58:05+01:00",
    "status": 2,
    "tags": [],
    "description": "<p dir=\"ltr\">If EH Application Support report that they have transactions and a tender declaration (closing record) in NAV, but no corresponding opening record, we need to insert another opening record for the same cash drawer.&nbsp;An example of a ticket regarding this is this one: <a href=\"https://support.k3btg.com/a/tickets/61821\">https://support.k3btg.com/a/tickets/61821</a>.</p><p dir=\"ltr\"><br></p><p dir=\"ltr\">You need to:</p><ol><li dir=\"ltr\">Grab original TXN file corresponding to the transactions EH Application Support send over as reference, if possible.<br><br></li><li dir=\"ltr\">In the local EH database, &nbsp;insert an opening record into TillTXNs, preferably using the original OPN line in the TXN File, but removing the seconds from the date/time fields<br><pre contenteditable=\"false\" data-code-brush=\"SQL\" rel=\"highlighter\">BEGIN TRANSACTION \nINSERT INTO TillTXNs \nVALUES(,,1,0,'','','','OPN,1,*Till*,*CashDrawer*,1,100,,*Date* 2024 10:00:00,0','','TIL')\n--COMMIT</pre><br></li><li dir=\"ltr\">Find the csdOpenTXNNo for the new cash drawer, and then mark this as finalised via SQL.<pre contenteditable=\"false\" data-code-brush=\"SQL\" rel=\"highlighter\">BEGIN TRANSACTION \nUPDATE CashDraw \nSET csdStatus='', csdClosedBy=100, csdNotes='Forced-Closed with no Closing record to resolve K3 ticket [Ticket Number]', csdClosedAt = '[Time and date the cash drawer was closed on the original cash drawer]'\nWHERE csdOpenTXNNo=[New cash drawer csdOpenTXNNo]\n--COMMIT</pre><p></p><br></li></ol>",
    "user_id": 103082581554,
    "thumbs_up": 0,
    "thumbs_down": 0,
    "hits": 0,
    "seo_data": {},
    "modified_at": "2024-09-26T09:58:05+01:00",
    "modified_by": 103082581554
  },
  {
    "id": 103000319226,
    "title": "EH tills unable to access internet, CRM and membership",
    "text": "Pendennis Castle had the following error when trying to access the CRM system. Also unable to access any url including the english-heritage.org.uk Ability to scan membership cards also affected. This was handled by EH IT and the following reply was received. Tills 2 and 3 were in wrong Organizational Unit in Active Directory, no idea how it happened. Best wishes Mark",
    "category": "INTERNAL Support Articles",
    "folder": "English Heritage",
    "created_at": "2024-11-01T09:24:14+00:00",
    "updated_at": "2024-11-01T09:24:19+00:00",
    "status": 2,
    "tags": [],
    "description": "<p data-identifyelement=\"496\" dir=\"ltr\"><span style=\"font-size: 18px;\"><strong>Pendennis Castle had the following error when trying to access the CRM system.</strong></span></p><p data-identifyelement=\"496\" dir=\"ltr\"><br></p><p data-identifyelement=\"496\" dir=\"ltr\"><span style=\"font-size: 18px;\"><strong dir=\"ltr\"><img src=\"https://s3-eu-central-1.amazonaws.com/euc-cdn.freshdesk.com/data/helpdesk/attachments/production/103160578233/original/Zl2-NH1c_D8sBVAg-xVaYON9RPPYUQbSqw.png?1730452470\" style=\"width: auto; max-width: 100%; display: block; float: none; vertical-align: top; margin: 5px auto; text-align: center;\" class=\"fr-fic fr-dib fr-bordered\" data-attachment=\"[object Object]\" data-id=\"103160578233\"></strong></span><br></p><p data-identifyelement=\"496\" dir=\"ltr\"><br></p><p data-identifyelement=\"496\" dir=\"ltr\"><br></p><p data-identifyelement=\"496\" dir=\"ltr\">Also unable to access any url including the <a href=\"//english-heritage.org\">english-heritage.org</a>.uk</p><p data-identifyelement=\"496\" dir=\"ltr\"><img src=\"https://s3-eu-central-1.amazonaws.com/euc-cdn.freshdesk.com/data/helpdesk/attachments/production/103160578890/original/58J7Fx92Qnhp78Hk3r5OmoUYSB6bJ91Gdg.png?1730452568\" style=\"width: 523px; max-width: 100%; display: block; float: none; vertical-align: top; margin: 5px auto; text-align: center;\" class=\"fr-fic fr-dib fr-bordered\" data-attachment=\"[object Object]\" data-id=\"103160578890\"></p><p data-identifyelement=\"496\" dir=\"ltr\"><br></p><p data-identifyelement=\"496\" dir=\"ltr\">Ability to scan membership cards also affected.</p><p data-identifyelement=\"496\" dir=\"ltr\"><br></p><p data-identifyelement=\"496\" dir=\"ltr\"><img src=\"https://s3-eu-central-1.amazonaws.com/euc-cdn.freshdesk.com/data/helpdesk/attachments/production/103160579235/original/rmp9Hsg4DJUT5cPfd3K4H8tjej7exZ3YdQ.png?1730452618\" style=\"width: 536px; max-width: 100%; display: block; float: none; vertical-align: top; margin: 5px auto; text-align: center;\" class=\"fr-fic fr-dib fr-bordered\" data-attachment=\"[object Object]\" data-id=\"103160579235\"></p><p data-identifyelement=\"496\" dir=\"ltr\"><br></p><p data-identifyelement=\"496\" dir=\"ltr\">This was handled by EH IT and the following reply was received.</p><p data-identifyelement=\"496\" dir=\"ltr\"><br></p><p dir=\"ltr\"><strong>Tills 2 and 3 were in wrong Organizational Unit in Active Directory, no idea how it happened.&nbsp;</strong></p><p><strong>Best wishes</strong></p><p><strong>Mark</strong></p><p data-identifyelement=\"496\" dir=\"ltr\"><br></p><p data-identifyelement=\"496\" dir=\"ltr\"><br></p>",
    "user_id": 103081816648,
    "thumbs_up": 0,
    "thumbs_down": 0,
    "hits": 0,
    "seo_data": {},
    "modified_at": "2024-11-01T09:24:19+00:00",
    "modified_by": 103081816648
  },
  {
    "id": 103000320229,
    "title": "EH verifone fails to log in due to second ethernet connection",
    "text": "It has come to light in some instances when verifone fails to log in. It may be due to a second ethernet connection being present. Disabling this second Ethernet connection may resolve the issue.",
    "category": "INTERNAL Support Articles",
    "folder": "English Heritage",
    "created_at": "2024-11-11T16:10:37+00:00",
    "updated_at": "2024-11-11T16:10:41+00:00",
    "status": 2,
    "tags": [
      {
        "name": "verifone login"
      },
      {
        "name": "eft"
      }
    ],
    "description": "<p dir=\"ltr\">It has come to light in some instances when verifone fails to log in.</p><p dir=\"ltr\">It may be due to a second ethernet connection being present.</p><p dir=\"ltr\"><br></p><p dir=\"ltr\">Disabling this second Ethernet connection may resolve the issue.</p><p dir=\"ltr\"><br></p><p dir=\"ltr\"><br></p><p dir=\"ltr\"><img src=\"https://s3-eu-central-1.amazonaws.com/euc-cdn.freshdesk.com/data/helpdesk/attachments/production/103163254497/original/45YTWaqXZ7Q8ro_GPrqb4btclOTqkN3z7Q.png?1731341327\" style=\"width: auto; max-width: 100%;\" class=\"fr-fic fr-fil fr-dib fr-bordered\" data-attachment=\"[object Object]\" data-id=\"103163254497\"></p>",
    "user_id": 103081816648,
    "thumbs_up": 0,
    "thumbs_down": 0,
    "hits": 0,
    "seo_data": {},
    "modified_at": "2024-11-11T16:10:41+00:00",
    "modified_by": 103081816648
  },
  {
    "id": 103000330296,
    "title": "Replace Day Of Week Analysis Report - EH Use Only",
    "text": "*EH Use Only* If you are experiencing a noticeable delay between double-clicking on the Day Of Week Analysis report and the parameter screen, then the report maybe looking for a default printer, which cannot be found. To resolve this issue, you need to remove this report and add it back in with no default printer set. To do this, please follow the below steps: Go to Reports (1), Transaction Reports (2) and select Day of Week Analysis (3). Click Delete (4). Click OK to the below prompt. You then need to click Import (5), then ... (6). In the next window, insert \\\\SVMMER01\\Meracdata\\Day Of Week Analysis (7) into the address bar at the top and press Enter key on your keyboard. Select DayOfWeekAnalysis.rpt (8), before pressing Open (9) . You will then be able to click Add in the previous screen. Please click OK (11) to the No Stored Procedure prompt. This is usually incorrect. You should then receive a Report Added prompt or Unable to save report. Both of these are expected behaviour and correctly adds the report to Reports. This has then added the report to the sites Back Office. Please run the report to make sure this is then working for you. Any problems, please contact support through the portal here.",
    "category": "INTERNAL Support Articles",
    "folder": "English Heritage",
    "created_at": "2025-01-21T17:24:31+00:00",
    "updated_at": "2025-01-24T13:45:29+00:00",
    "status": 2,
    "tags": [],
    "description": "<p dir=\"ltr\"><strong><span style=\"color: rgb(226, 80, 65);\">*EH Use Only*</span></strong></p><p dir=\"ltr\"><br></p><p dir=\"ltr\">If you are experiencing a noticeable delay between double-clicking on the Day Of Week Analysis report and the parameter screen, then the report maybe looking for a default printer, which cannot be found.</p><p dir=\"ltr\"><br></p><p dir=\"ltr\">To resolve this issue, you need to remove this report and add it back in with no default printer set. To do this, please follow the below steps:</p><p dir=\"ltr\"><br></p><ol><li dir=\"ltr\">Go to <strong dir=\"ltr\">Reports&nbsp;</strong>(<strong><span style=\"color: rgb(226, 80, 65);\">1</span></strong>), <strong>Transaction Reports</strong> <span dir=\"ltr\" style=\"color: rgb(0, 0, 0); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-size: 13px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal;  text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;\">(</span><span dir=\"ltr\" style=\"color: rgb(226, 80, 65); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-size: 13px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; float: none; display: inline !important;\"><strong>2</strong></span><span dir=\"ltr\" style=\"color: rgb(0, 0, 0); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-size: 13px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal;  text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;\">)</span> and select <strong dir=\"ltr\">Day of Week Analysis <span dir=\"ltr\" style=\"color: rgb(0, 0, 0); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-size: 13px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal;  text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;\">(</span></strong><span dir=\"ltr\" style=\"color: rgb(226, 80, 65); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-size: 13px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; float: none; display: inline !important;\"><strong>3</strong></span><strong dir=\"ltr\"><span dir=\"ltr\" style=\"color: rgb(0, 0, 0); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-size: 13px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal;  text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;\">)</span></strong>.<img src=\"https://s3-eu-central-1.amazonaws.com/euc-cdn.freshdesk.com/data/helpdesk/attachments/production/103182309331/original/wEREqoHC1EiFCUt3oeQfWn5WCQPt8cZZvQ.png?1737478640\" style=\"width: auto; max-width: 100%;\" class=\"fr-fic fr-fil fr-dib\" data-attachment=\"[object Object]\" data-id=\"103182309331\"><br></li><li dir=\"ltr\">Click <strong>Delete&nbsp;</strong>(<strong><span style=\"color: rgb(226, 80, 65);\">4</span></strong>).<br><br></li><li dir=\"ltr\">Click <strong>OK&nbsp;</strong>to the below prompt.<br><img src=\"https://s3-eu-central-1.amazonaws.com/euc-cdn.freshdesk.com/data/helpdesk/attachments/production/103182317086/original/A8tzSQTaso1n7Tct64ssOJvzVNZ0wx5sEA.png?1737479427\" style=\"width: auto; max-width: 100%;\" class=\"fr-fic fr-fil fr-dib\" data-attachment=\"[object Object]\" data-id=\"103182317086\"><br></li><li dir=\"ltr\">You then need to click <strong dir=\"ltr\">Import&nbsp;</strong>(<strong dir=\"ltr\"><span style=\"color: rgb(226, 80, 65);\">5</span></strong>), then <strong dir=\"ltr\">...&nbsp;</strong>(<strong dir=\"ltr\"><span dir=\"ltr\" style=\"color: rgb(226, 80, 65);\">6</span></strong>).<br><img src=\"https://s3-eu-central-1.amazonaws.com/euc-cdn.freshdesk.com/data/helpdesk/attachments/production/103182518652/original/QTHu63fngCDIq8z31WQzmvoFd5xFuscphg.png?1737539284\" style=\"width: auto; max-width: 100%;\" class=\"fr-fic fr-fil fr-dib\" data-attachment=\"[object Object]\" data-id=\"103182518652\"><br></li><li dir=\"ltr\">In the next window, insert <strong dir=\"ltr\">\\\\SVMMER01\\Meracdata\\Day Of Week Analysis <span style=\"color: rgb(0, 0, 0); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-size: 13px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal;  text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;\">(</span><span dir=\"ltr\" style=\"box-sizing: border-box; color: rgb(226, 80, 65);\">7</span><span dir=\"ltr\" style=\"color: rgb(0, 0, 0); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-size: 13px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal;  text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;\">)</span>&nbsp;</strong>into the address bar at the top and press <strong dir=\"ltr\">Enter&nbsp;</strong>key on your keyboard.<br><br></li><li dir=\"ltr\">Select <strong dir=\"ltr\">DayOfWeekAnalysis.rpt <span style=\"color: rgb(0, 0, 0); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-size: 13px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal;  text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;\">(</span><span dir=\"ltr\" style=\"box-sizing: border-box; color: rgb(226, 80, 65);\">8</span><span dir=\"ltr\" style=\"color: rgb(0, 0, 0); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-size: 13px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal;  text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;\">),</span>&nbsp;</strong>before pressing <strong dir=\"ltr\">Open <span style=\"color: rgb(0, 0, 0); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-size: 13px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal;  text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;\">(</span><span dir=\"ltr\" style=\"box-sizing: border-box; color: rgb(226, 80, 65);\">9</span><span dir=\"ltr\" style=\"color: rgb(0, 0, 0); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-size: 13px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal;  text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;\">)</span>&nbsp;</strong>.<br><strong dir=\"ltr\"><img src=\"https://s3-eu-central-1.amazonaws.com/euc-cdn.freshdesk.com/data/helpdesk/attachments/production/103182526742/original/v63h0XN67ofzCyzlVkHPVcvNd4oEP08bUQ.png?1737539992\" style=\"width: auto; max-width: 100%;\" class=\"fr-fic fr-fil fr-dib\" data-attachment=\"[object Object]\" data-id=\"103182526742\"></strong><br></li><li dir=\"ltr\">You will then be able to click <strong dir=\"ltr\">Add&nbsp;</strong>in the previous screen.<br><strong dir=\"ltr\"><img src=\"https://s3-eu-central-1.amazonaws.com/euc-cdn.freshdesk.com/data/helpdesk/attachments/production/103182529736/original/kpLsRK-M9qLMfMntCbO7U0O5Bb0wu09bsQ.png?1737540249\" style=\"width: auto; max-width: 100%;\" class=\"fr-fic fr-fil fr-dib\" data-attachment=\"[object Object]\" data-id=\"103182529736\"></strong><br></li><li dir=\"ltr\">Please click <strong>OK&nbsp;</strong>(<strong dir=\"ltr\"><span style=\"color: rgb(226, 80, 65);\">11</span></strong>) to the No Stored Procedure prompt. This is usually incorrect.<br><img src=\"https://s3-eu-central-1.amazonaws.com/euc-cdn.freshdesk.com/data/helpdesk/attachments/production/103183436581/original/gsPTVxKbRQBHjcShJg8GIZak5G-X6nhq7Q.png?1737725416\" style=\"width: auto; max-width: 100%;\" class=\"fr-fic fr-fil fr-dib\" data-attachment=\"[object Object]\" data-id=\"103183436581\"><br></li><li dir=\"ltr\">You should then receive a Report Added prompt or Unable to save report. Both of these are expected behaviour and correctly adds the report to Reports.<br><img src=\"https://s3-eu-central-1.amazonaws.com/euc-cdn.freshdesk.com/data/helpdesk/attachments/production/103183438384/original/fZUU6lwEh3e0Wm93YYA5CJ73StOEMpRqnA.png?1737725609\" style=\"width: auto; max-width: 100%;\" class=\"fr-fic fr-fil fr-dib\" data-attachment=\"[object Object]\" data-id=\"103183438384\"></li></ol><p><br></p><p dir=\"ltr\">This has then added the report to the sites Back Office. Please run the report to make sure this is then working for you. Any problems, please contact support through the portal <a href=\"https://support.k3btg.com/en/support/login\" rel=\"noreferrer\" target=\"_blank\">here</a>.</p>",
    "user_id": 103082581554,
    "thumbs_up": 0,
    "thumbs_down": 0,
    "hits": 1,
    "seo_data": {},
    "modified_at": "2025-01-24T13:45:29+00:00",
    "modified_by": 103082581554
  },
  {
    "id": 103000342603,
    "title": "P400 printing Unable to retrieve data",
    "text": "Getting the below error message printed on N EH till using P400 PED. Likely cause no c:\\Temp Folder. Create the folder and try again. NB all Sentinel references in the Mstore.ini should be commented out.",
    "category": "INTERNAL Support Articles",
    "folder": "English Heritage",
    "created_at": "2025-03-28T12:55:13+00:00",
    "updated_at": "2025-03-28T12:55:16+00:00",
    "status": 2,
    "tags": [],
    "description": "<p data-identifyelement=\"483\" dir=\"ltr\">Getting the below error message printed on N EH till using P400 PED.</p><p data-identifyelement=\"483\" dir=\"ltr\"><br></p><p data-identifyelement=\"483\" dir=\"ltr\"><img src=\"https://s3-eu-central-1.amazonaws.com/euc-cdn.freshdesk.com/data/helpdesk/attachments/production/103202489177/original/ySQaKY43kAAwa_jniJh3qSeL2T_2LSPShg.png?1743166268\" style=\"width: auto; max-width: 100%; display: block; float: none; vertical-align: top; margin: 5px auto; text-align: center;\" class=\"fr-fic fr-dib fr-bordered\" data-attachment=\"[object Object]\" data-id=\"103202489177\"></p><p data-identifyelement=\"483\" dir=\"ltr\"><br></p><p data-identifyelement=\"483\" dir=\"ltr\">Likely cause no c:\\Temp Folder.</p><p data-identifyelement=\"483\" dir=\"ltr\"><br></p><p data-identifyelement=\"483\" dir=\"ltr\">Create the folder and try again.</p><p data-identifyelement=\"483\" dir=\"ltr\"><br></p><p data-identifyelement=\"483\" dir=\"ltr\">NB all Sentinel references in the Mstore.ini should be commented out.</p><p data-identifyelement=\"483\" dir=\"ltr\"><br></p><p data-identifyelement=\"483\" dir=\"ltr\"><br></p>",
    "user_id": 103081816648,
    "thumbs_up": 0,
    "thumbs_down": 0,
    "hits": 0,
    "seo_data": {},
    "modified_at": "2025-03-28T12:55:16+00:00",
    "modified_by": 103081816648
  },
  {
    "id": 103000354166,
    "title": "Education Bookings Not Displaying In MStoreV4 Booking Search Screen",
    "text": "If EH Application Support report that they cannot search for a booking, then you may want to attempt to search for the booking with this SQL, which is what the search window uses (stored procedure p_Search_Entity). SELECT DISTINCT top 100 T.ID, BCH.ID as BCH_ID, CON.ID as CO_ID, CON2.ID as CO2_ID, CON3.ID as CO3_ID, ACC.ID as ACC_ID, bchName Site , (SELECT BKS.bksName FROM BKStatus BKS where BKS.bksCode = T.bkhStatus) AS Status , T.bkhFromDateTime as [BookingDate] , T.bkhDescription as BKDescription , CASE WHEN ISNULL(ACC.accAccNum,'') = '' THEN ACC.accName ELSE ACC.accAccNum + '/' + ACC.accName END Account , CON.conSurname + '', '' + CON.conForeNames Contact , CON2.conSurname + '', '' + CON2.conForeNames Contact2 , CON3.conSurname + '', '' + CON3.conForeNames Contact3 , lkdDescription [Type], ISNULL(accAlertFlag,0) as accAlertFlag, ISNULL(CON.conAlertFlag,0) as conAlertFlag -- @innerjoin = FROM BKHeader (NOLOCK) T JOIN BKBlock (NOLOCK) B ON B.ID = T.bkhIDBKBlock AND B.LastAction <> 2 JOIN Search_Booking (NOLOCK) S ON S.BKH_ID = T.ID JOIN Account (NOLOCK) ACC ON ACC.ID = S.ACC_ID JOIN AccountContact (NOLOCK) CON ON CON.ID = S.CON_ID -- @leftjoin = LEFT JOIN AccountContact (NOLOCK) CON2 ON CON2.ID = S.CON2_ID LEFT JOIN AccountContact (NOLOCK) CON3 ON CON3.ID = S.CON3_ID LEFT JOIN Branch (NOLOCK) BCH ON BCH.ID = S.BCH_ID LEFT JOIN LookupDetail (NOLOCK) LK ON LK.ID = T.bkhIDLookup_Type where T.id= This was used in ticket 76109, where I found that there was not a BKBlock and Search_Booking records for the respective booking. If your situation is similar, you can use the below SQL to resolve this issue by replicating an existing record, to then associate it with the booking in question. SELECT * FROM BKBlock where bkbIDAccount= SELECT * INTO BAKBKBlock20May2025 FROM BKBlock BEGIN TRANSACTION insert into BKBlock ( LastAction, LastActionDate, LastActionBy, bkbCode, bkbIDAccount, bkbIDLookup_Source, bkbIsGiftAid, bkbIsInternet, bkbBasis, bkbDateCreated, bkbIDEmployee_CreatedBy) SELECT LastAction, LastActionDate, LastActionBy, bkbCode, bkbIDAccount, bkbIDLookup_Source, bkbIsGiftAid, bkbIsInternet, bkbBasis, GETDATE(), bkbIDEmployee_CreatedBy FROM BKBlock WHERE BKBlock.ID= --COMMIT SELECT * INTO BAKBKHeader20May2025 FROM BKHeader BEGIN TRANSACTION UPDATE BKHeader SET bkhIDBKBlock= WHERE ID= --COMMIT SELECT * INTO BAKSearch_Booking20MAY25 FROM Search_Booking BEGIN TRANSACTION INSERT INTO Search_Booking (BKH_ID, BCH_ID, ACC_ID, CON_ID, CON2_ID, CON3_ID, SearchField) SELECT xxxx, BCH_ID, ACC_ID, CON_ID, CON2_ID, CON3_ID, SearchField FROM Search_Booking WHERE BKH_ID IN () --COMMIT",
    "category": "INTERNAL Support Articles",
    "folder": "English Heritage",
    "created_at": "2025-05-20T15:07:11+01:00",
    "updated_at": "2025-05-27T13:23:10+01:00",
    "status": 2,
    "tags": [],
    "description": "<p dir=\"ltr\">If EH Application Support report that they cannot search for a booking, then you may want to attempt to search for the booking with this SQL, which is what the search window uses (stored procedure <strong>p_Search_Entity</strong>).</p><p dir=\"ltr\"><br></p><div><pre contenteditable=\"false\" data-code-brush=\"SQL\" rel=\"highlighter\">SELECT DISTINCT top 100  T.ID, BCH.ID as BCH_ID, CON.ID as CO_ID, CON2.ID as CO2_ID, CON3.ID as CO3_ID, ACC.ID as ACC_ID, bchName Site\n              , (SELECT BKS.bksName FROM BKStatus BKS where BKS.bksCode = T.bkhStatus) AS Status\n              , T.bkhFromDateTime as [BookingDate]\n              , T.bkhDescription as BKDescription \n              , CASE WHEN ISNULL(ACC.accAccNum,'') = '' THEN ACC.accName ELSE ACC.accAccNum + '/' + ACC.accName END Account \n              , CON.conSurname + '', '' + CON.conForeNames Contact\n              , CON2.conSurname + '', '' + CON2.conForeNames Contact2\n              , CON3.conSurname + '', '' + CON3.conForeNames Contact3\n              , lkdDescription [Type], ISNULL(accAlertFlag,0) as accAlertFlag, ISNULL(CON.conAlertFlag,0) as conAlertFlag\n      --   @innerjoin = \n      FROM BKHeader (NOLOCK) T \n      JOIN BKBlock (NOLOCK) B ON B.ID = T.bkhIDBKBlock AND B.LastAction &lt;&gt; 2 \n      JOIN Search_Booking (NOLOCK) S ON S.BKH_ID = T.ID\n         JOIN Account (NOLOCK) ACC ON ACC.ID = S.ACC_ID \n              JOIN AccountContact (NOLOCK) CON ON CON.ID = S.CON_ID \n      --  @leftjoin = \n        LEFT JOIN AccountContact (NOLOCK) CON2 ON CON2.ID =  S.CON2_ID\n              LEFT JOIN AccountContact (NOLOCK) CON3 ON CON3.ID = S.CON3_ID\n              LEFT JOIN Branch (NOLOCK) BCH ON BCH.ID = S.BCH_ID \n              LEFT JOIN LookupDetail (NOLOCK) LK ON LK.ID = T.bkhIDLookup_Type\n              where T.id=</pre><p style=\"margin-left: 0px; text-align: left;\"><span dir=\"ltr\" style=\"font-size: 13px; background-color: rgba(0, 0, 0, 0); color: rgb(0, 0, 0); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, sans-serif;\">This was used in ticket <a dir=\"ltr\" href=\"https://k3support.freshdesk.com/a/tickets/76109\">76109</a>, where I found that there was not a BKBlock and Search_Booking records for the respective booking. If your situation is similar, you can use the below SQL to resolve this issue by replicating an existing record, to then associate it with the booking in question.</span></p><p style=\"margin-left: 0px; text-align: left;\"><br></p><div><pre contenteditable=\"false\" data-code-brush=\"SQL\" rel=\"highlighter\">SELECT * FROM BKBlock\nwhere bkbIDAccount=\n\nSELECT * INTO BAKBKBlock20May2025 FROM BKBlock\n\nBEGIN TRANSACTION \ninsert into BKBlock ( LastAction, LastActionDate, LastActionBy, bkbCode, bkbIDAccount, bkbIDLookup_Source, bkbIsGiftAid, bkbIsInternet, bkbBasis, bkbDateCreated, bkbIDEmployee_CreatedBy)\nSELECT  LastAction, LastActionDate, LastActionBy, bkbCode, bkbIDAccount, bkbIDLookup_Source, bkbIsGiftAid, bkbIsInternet, bkbBasis, GETDATE(), bkbIDEmployee_CreatedBy FROM BKBlock\nWHERE BKBlock.ID=\n--COMMIT\n\nSELECT * INTO BAKBKHeader20May2025 FROM BKHeader\n\nBEGIN TRANSACTION \nUPDATE BKHeader\nSET bkhIDBKBlock=\nWHERE ID=\n--COMMIT \n\n\nSELECT * INTO BAKSearch_Booking20MAY25 FROM Search_Booking\n\nBEGIN TRANSACTION \nINSERT INTO Search_Booking (BKH_ID, BCH_ID, ACC_ID, CON_ID, CON2_ID, CON3_ID, SearchField)\nSELECT xxxx, BCH_ID, ACC_ID, CON_ID, CON2_ID, CON3_ID, SearchField FROM Search_Booking\nWHERE BKH_ID IN ()\n--COMMIT </pre></div></div>",
    "user_id": 103082581554,
    "thumbs_up": 0,
    "thumbs_down": 0,
    "hits": 0,
    "seo_data": {},
    "modified_at": "2025-05-20T15:07:11+01:00",
    "modified_by": 103082581554
  },
  {
    "id": 103000355596,
    "title": "PAY-Failed to save Payment record With Transaction With Multiple Payment Lines For EH",
    "text": "If you find stuck transactions in TillTXNs, with the error of something along the lines of the below, this might be due to the system struggling to insert two Invoice payments for one transaction. PAY-Failed to save Payment record for Txn No 72975 on Till 25 (Violation of PRIMARY KEY constraint PK_Invoice . Cannot insert duplicate key in object dbo.Invoice . The duplicate key value is (1, 2252629). The statement has been terminated.) To fix this, double check that there are no other transactions relating to this transaction already in the database (Knowledge Base article: PAY-Failed to save Payment record for Txn No xxxx). If this isn't the case, then you need to merge the two payment amounts in one line and then remove the other. Example SQL of this can be found below, linking to ticket 77662. SELECT * FROM TILLTXNS SELECT * FROM TXNHeader JOIN TXNDetail ON txhBranch=txnBranch AND txhNo=txnNo --LEFT JOIN Payments ON txhBranch=payBranch AND txhNo=payTxnNo WHERE txhBranch=1 --AND txhNo IN () AND txhTillTXNo IN (72975) --AND TXHTillNo IN (25) --AND TXNOrderNo IN () --AND TXHCompleted BETWEEN ' 2025' AND ' 2025 23:59' ORDER By TXHCompleted DESC SELECT * INTO BAKTillTXNs05Jun2025 FROM TillTXNs BEGIN TRANSACTION UPDATE tilltxns SET ttnTXNDetails='PAY,1,25,25,72975,6,35,0,. HTOP (IOW) lIMITED T/A The A,1140 X2 CLIVE HASLOCK,. HTOP (IOW) lIMITED T/A The A,Albert Cottage|York Avenue|East Cowes|Isle of Wight|PO32 6BD|,,,0,0,0,False,,,,,,,,0,0,GBP,35,1' WHERE ttnTXNDetails='PAY,1,25,25,72975,6,34.98,0,. HTOP (IOW) lIMITED T/A The A,1140 X2 CLIVE HASLOCK,. HTOP (IOW) lIMITED T/A The A,Albert Cottage|York Avenue|East Cowes|Isle of Wight|PO32 6BD|,,,0,0,0,False,,,,,,,,0,0,GBP,34.98,1' --COMMIT BEGIN TRANSACTION DELETE FROM TillTXNs WHERE ttnTXNDetails='PAY,1,25,25,72975,6,0.02,0,. HTOP (IOW) lIMITED T/A The A,1140 X2 CLIVE HASLOCK,. HTOP (IOW) lIMITED T/A The A,Albert Cottage|York Avenue|East Cowes|Isle of Wight|PO32 6BD|,,,0,0,0,False,,,,,,,,0,0,GBP,0.02,1' --COMMIT Update TILLTXNs Set ttnErrorMessage='', ttnStatus=''",
    "category": "INTERNAL Support Articles",
    "folder": "English Heritage",
    "created_at": "2025-06-05T16:12:11+01:00",
    "updated_at": "2025-06-05T16:12:12+01:00",
    "status": 2,
    "tags": [],
    "description": "<p dir=\"ltr\">If you find stuck transactions in TillTXNs, with the error of something along the lines of the below, this might be due to the system struggling to insert two Invoice payments for one transaction.</p><p dir=\"ltr\"><em>PAY-Failed to save Payment record for Txn No 72975 on Till 25 (Violation of PRIMARY KEY constraint &nbsp;PK_Invoice . Cannot insert duplicate key in object &nbsp;dbo.Invoice . The duplicate key value is (1, 2252629). &nbsp;The statement has been terminated.)</em></p><p dir=\"ltr\"><br></p><p dir=\"ltr\">To fix this, double check that there are no other transactions relating to this transaction already in the database (<a href=\"https://k3support.freshdesk.com/a/solutions/articles/103000247835?lang=en\" rel=\"noopener noreferrer\" target=\"_blank\">Knowledge Base article: PAY-Failed to save Payment record for Txn No xxxx</a>). If this isn't the case, then you need to merge the two payment amounts in one line and then remove the other.</p><p dir=\"ltr\"><br></p><p dir=\"ltr\">Example SQL of this can be found below, linking to ticket <a dir=\"ltr\" href=\"https://k3support.freshdesk.com/a/tickets/77662\">77662</a>.</p><p dir=\"ltr\"><br></p><div><pre contenteditable=\"false\" data-code-brush=\"SQL\" rel=\"highlighter\">SELECT * FROM TILLTXNS\n\nSELECT * FROM TXNHeader \nJOIN TXNDetail ON txhBranch=txnBranch AND txhNo=txnNo \n--LEFT JOIN Payments ON txhBranch=payBranch AND txhNo=payTxnNo \nWHERE txhBranch=1 \n--AND txhNo IN () \nAND txhTillTXNo IN (72975) \n--AND TXHTillNo IN (25) \n--AND TXNOrderNo IN () \n--AND TXHCompleted BETWEEN ' 2025' AND ' 2025 23:59' \nORDER By TXHCompleted DESC\n\nSELECT * INTO BAKTillTXNs05Jun2025 FROM TillTXNs\n\n\nBEGIN TRANSACTION \nUPDATE tilltxns\nSET ttnTXNDetails='PAY,1,25,25,72975,6,<span style=\"background-color: rgb(226, 80, 65);\">35</span>,0,. HTOP (IOW) lIMITED T/A The A,1140 X2 CLIVE HASLOCK,. HTOP (IOW) lIMITED T/A The A,Albert Cottage|York Avenue|East Cowes|Isle of Wight|PO32 6BD|,,,0,0,0,False,,,,,,,,0,0,GBP,<span style=\"background-color: rgb(226, 80, 65);\">35</span>,1'\nWHERE ttnTXNDetails='PAY,1,25,25,72975,6,34.98,0,. HTOP (IOW) lIMITED T/A The A,1140 X2 CLIVE HASLOCK,. HTOP (IOW) lIMITED T/A The A,Albert Cottage|York Avenue|East Cowes|Isle of Wight|PO32 6BD|,,,0,0,0,False,,,,,,,,0,0,GBP,34.98,1'\n--COMMIT \n\nBEGIN TRANSACTION \nDELETE FROM TillTXNs\nWHERE ttnTXNDetails='PAY,1,25,25,72975,6,0.02,0,. HTOP (IOW) lIMITED T/A The A,1140 X2 CLIVE HASLOCK,. HTOP (IOW) lIMITED T/A The A,Albert Cottage|York Avenue|East Cowes|Isle of Wight|PO32 6BD|,,,0,0,0,False,,,,,,,,0,0,GBP,0.02,1'\n--COMMIT \n\nUpdate TILLTXNs \nSet ttnErrorMessage='', ttnStatus=''</pre></div>",
    "user_id": 103082581554,
    "thumbs_up": 0,
    "thumbs_down": 0,
    "hits": 0,
    "seo_data": {},
    "modified_at": "2025-06-05T16:12:11+01:00",
    "modified_by": 103082581554
  }
]